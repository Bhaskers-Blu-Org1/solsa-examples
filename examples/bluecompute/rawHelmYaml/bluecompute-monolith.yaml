# bluecompute-mysql-test
apiVersion: v1
kind: Pod
metadata:
  name: bluecompute-mysql-test
  labels:
    app: bluecompute-mysql
    chart: "mysql-0.10.2"
    heritage: "Tiller"
    release: "bluecompute"
  annotations:
    "helm.sh/hook": test-success
spec:
  initContainers:
    - name: test-framework
      image: dduportal/bats:0.4.0
      command:
      - "bash"
      - "-c"
      - |
        set -ex
        # copy bats to tools dir
        cp -R /usr/local/libexec/ /tools/bats/
      volumeMounts:
      - mountPath: /tools
        name: tools
  containers:
    - name: bluecompute-test
      image: "mysql:5.7.14"
      command: ["/tools/bats/bats", "-t", "/tests/run.sh"]
      volumeMounts:
      - mountPath: /tests
        name: tests
        readOnly: true
      - mountPath: /tools
        name: tools
  volumes:
  - name: tests
    configMap:
      name: bluecompute-mysql-test
  - name: tools
    emptyDir: {}
  restartPolicy: Never
---
# bluecompute-mariadb-test-ku4ed
apiVersion: v1
kind: Pod
metadata:
  name: "bluecompute-mariadb-test-ku4ed"
  annotations:
    "helm.sh/hook": test-success
spec:
  initContainers:
    - name: "test-framework"
      image: "dduportal/bats:0.4.0"
      command:
        - "bash"
        - "-c"
        - |
          set -ex
          # copy bats to tools dir
          cp -R /usr/local/libexec/ /tools/bats/
      volumeMounts:
      - mountPath: /tools
        name: tools
  containers:
    - name: mariadb-test
      image: docker.io/bitnami/mariadb:10.1.36-debian-9
      imagePullPolicy: "IfNotPresent"
      command: ["/tools/bats/bats", "-t", "/tests/run.sh"]
      env:
        - name: MARIADB_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-mariadb
              key: mariadb-root-password
      volumeMounts:
      - mountPath: /tests
        name: tests
        readOnly: true
      - mountPath: /tools
        name: tools
  volumes:
  - name: tests
    configMap:
      name: bluecompute-mariadb-tests
  - name: tools
    emptyDir: {}
  restartPolicy: Never
MANIFEST:

---
# Source: bluecompute/templates/pod_security_policy.yaml
apiVersion: extensions/v1beta1
kind: PodSecurityPolicy
metadata:
  name: bluecompute-pod-security-policy
  labels:
    chart: 'bluecompute-bluecompute-0.0.6'
    release: bluecompute
    implementation: microprofile
spec:
  allowedCapabilities:
  - IPC_LOCK
  fsGroup:
    rule: RunAsAny
  hostPorts:
  - max: 65535
    min: 1
  privileged: true
  runAsUser:
    rule: RunAsAny
  seLinux:
    rule: RunAsAny
  supplementalGroups:
    rule: RunAsAny
  volumes:
  - '*'
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-user-secret.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: Secret
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring-1.1.0
    component: grafana
    release: bluecompute
    heritage: Tiller
  name: bluecompute-grafana-secret
type: Opaque
data:
  username: YWRtaW4=
  password: YWRtaW4=
---
# Source: bluecompute/charts/ibmcase-elasticsearch/templates/a_secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bluecompute-binding-refarch-compose-for-elasticsearch
  namespace: bluecompute
  labels:
    datastore: elasticsearch
    release: "bluecompute"
    chart: "bluecompute-ibmcase-elasticsearch-0.0.1"
type: Opaque
data:
  binding: "eyJ1cmkiOiJodHRwOi8vYmx1ZWNvbXB1dGUtY2F0YWxvZy1lbGFzdGljc2VhcmNoOjkyMDAvIn0="
---
# Source: bluecompute/charts/inventory/templates/mysql_secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bluecompute-inventory-mysql-secret
  labels:
    chart: 'bluecompute-inventory-0.0.1'
    release: bluecompute
    implementation: microprofile
type: Opaque
data:
  mysql-password: "cGFzc3dvcmQ="
---
# Source: bluecompute/charts/inventorydb/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bluecompute-inventorydb
  labels:
    app: bluecompute-inventorydb
    chart: "inventorydb-0.0.1"
    release: "bluecompute"
    heritage: "Tiller"
    implementation: microprofile
type: Opaque
data:
  
  mysql-root-password:  "cGFzc3dvcmQ="
  
  
  mysql-password:  "cGFzc3dvcmQ="
---
# Source: bluecompute/charts/mariadb/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bluecompute-mariadb
  labels:
    app: "mariadb"
    chart: mariadb-5.2.2
    release: "bluecompute"
    heritage: "Tiller"
type: Opaque
data:
  mariadb-root-password: "cGFzc3dvcmQ="
  mariadb-password: "cGFzc3dvcmQ="
---
# Source: bluecompute/charts/mysql/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bluecompute-mysql
  labels:
    app: bluecompute-mysql
    chart: "mysql-0.10.2"
    release: "bluecompute"
    heritage: "Tiller"
type: Opaque
data:
  
  mysql-root-password:  "cGFzc3dvcmQ="
  
  
  mysql-password:  "cGFzc3dvcmQ="
---
# Source: bluecompute/charts/orders/templates/mariadb_secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bluecompute-orders-mariadb-secret
  labels:
    chart: 'bluecompute-orders-0.0.1'
    release: bluecompute
    implementation: microprofile
type: Opaque
data:
  mariadb-password: "cGFzc3dvcmQ="
---
# Source: bluecompute/charts/ordersdb/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bluecompute-ordersdb
  labels:
    app: bluecompute-ordersdb
    chart: "ordersdb-0.0.1"
    release: "bluecompute"
    heritage: "Tiller"
    implementation: microprofile
type: Opaque
data:
  
  mysql-root-password:  "cGFzc3dvcmQ="
  
  
  mysql-password:  "cGFzc3dvcmQ="
---
# Source: bluecompute/charts/catalog/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bluecompute-catalog-config
data:
  jvm.options: |
    
    -Dclient.InventoryServiceClient/mp-rest/url=http://bluecompute-inventory:9080/inventory/rest/inventory
---
# Source: bluecompute/charts/customer/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bluecompute-customer-config
data:
  jvm.options: |
    -Dapplication.rest.client.CloudantClientService/mp-rest/url=http://bluecompute-cloudant-service:80
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/alert-rules-config.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute-prometheus
    chart: ibm-icpmonitoring-1.1.0
    component: prometheus
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus-alertrules
data:  
  alert.rules: ""
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/alertmanager-config.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute-prometheus
    chart: ibm-icpmonitoring-1.1.0
    component: alertmanager
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus-alertmanager
data:  
  alertmanager.yml: |-
    global:
    receivers:
      - name: default-receiver
    route:
      group_wait: 10s
      group_interval: 5m
      receiver: default-receiver
      repeat_interval: 3h
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-config.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring-1.1.0
    component: grafana
    release: bluecompute
    heritage: Tiller
  name: bluecompute-grafana
data:  
  grafana.ini: |-
      ; instance_name = ${HOSTNAME}
      [paths]
      data = /var/lib/grafana/data
      logs = /var/log/grafana
      plugins = /var/lib/grafana/plugins
  
      [server]
      ;protocol = http
      ;http_addr =
      http_port = 3000
      ;domain = localhost
      ;enforce_domain = false
      ;router_logging = false
      ;static_root_path = public
      ;enable_gzip = false
      ;cert_file =
      ;cert_key =
  
      [database]
      ;type = sqlite3
      ;host = 127.0.0.1:3306
      ;name = grafana
      ;user = root
      ;password =
      ;ssl_mode = disable
      ;path = grafana.db
  
      [session]
      ;provider = file
      ;provider_config = sessions
      ;cookie_name = grafana_sess
      ;cookie_secure = false
      ;session_life_time = 86400
  
      [analytics]
      ;reporting_enabled = true
      check_for_updates = true
      ;google_analytics_ua_id =
  
      [security]
      ;admin_user = admin
      ;admin_password = admin
      ;secret_key = SW2YcwTIb9zpOOhoPsMm
      ;login_remember_days = 7
      ;cookie_username = grafana_user
      ;cookie_remember_name = grafana_remember
      ;disable_gravatar = false
      ;data_source_proxy_whitelist =
  
      [snapshots]
      ;external_enabled = true
      ;external_snapshot_url = https://snapshots-origin.raintank.io
      ;external_snapshot_name = Publish to snapshot.raintank.io
  
      [users]
      ;allow_sign_up = true
      ;allow_org_create = true
      ;auto_assign_org = true
      ;auto_assign_org_role = Viewer
      ;login_hint = email or username
      default_theme = light
  
      [auth.anonymous]
      ;enabled = true
      ;org_name = Main Org.
      ;org_role = Admin
  
      [auth.github]
      ;enabled = false
      ;allow_sign_up = false
      ;client_id = some_id
      ;client_secret = some_secret
      ;scopes = user:email,read:org
      ;auth_url = https://github.com/login/oauth/authorize
      ;token_url = https://github.com/login/oauth/access_token
      ;api_url = https://api.github.com/user
      ;team_ids =
      ;allowed_organizations =
  
      [auth.google]
      ;enabled = false
      ;allow_sign_up = false
      ;client_id = some_client_id
      ;client_secret = some_client_secret
      ;scopes = https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
      ;auth_url = https://accounts.google.com/o/oauth2/auth
      ;token_url = https://accounts.google.com/o/oauth2/token
      ;api_url = https://www.googleapis.com/oauth2/v1/userinfo
      ;allowed_domains =
  
      [auth.proxy]
      ;enabled = false
      ;header_name = X-WEBAUTH-USER
      ;header_property = username
      ;auto_sign_up = true
  
      [auth.basic]
      ;enabled = true
  
      [auth.ldap]
      ;enabled = false
      ;config_file = /etc/grafana/ldap.toml
  
      [smtp]
      ;enabled = false
      ;host = localhost:25
      ;user =
      ;password =
      ;cert_file =
      ;key_file =
      ;skip_verify = false
      ;from_address = admin@grafana.localhost
  
      [emails]
      ;welcome_email_on_sign_up = false
  
      [log]
      mode = console
      level = info
  
      [log.console]
      ;level =
      ;format = console
  
      [event_publisher]
      ;enabled = false
      ;rabbitmq_url = amqp://localhost/
      ;exchange = grafana_events
  
      [dashboards.json]
      enabled = true
      path = /etc/dashboards
  
      [metrics]
      ;enabled           = true
      ;interval_seconds  = 10
  
      ; [metrics.graphite]
      ; address = localhost:2003
      ; prefix = prod.grafana.%(instance_name)s.
  
      [grafana_com]
      url = https://grafana.com
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-dashboards.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring-1.1.0
    component: grafana
    release: bluecompute
    heritage: Tiller
  name: bluecompute-grafana-dashboards
data:  
  prometheus-monitoring.json: |-
      {
        "__inputs": [
          {
            "name": "DS_PROMETHEUS",
            "label": "Prometheus",
            "description": "Prometheus which you want to monitor",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          }
        ],
        "__requires": [
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "4.6.0"
          },
          {
            "type": "panel",
            "id": "graph",
            "name": "Graph",
            "version": ""
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
          },
          {
            "type": "panel",
            "id": "singlestat",
            "name": "Singlestat",
            "version": ""
          },
          {
            "type": "panel",
            "id": "text",
            "name": "Text",
            "version": ""
          }
        ],
        "annotations": {
          "list": []
        },
        "description": "Dashboard for monitoring of Prometheus v2.x.x",
        "editable": true,
        "gnetId": 3681,
        "graphTooltip": 1,
        "hideControls": false,
        "id": null,
        "links": [
          {
            "icon": "doc",
            "tags": [],
            "targetBlank": true,
            "title": "Prometheus Docs",
            "tooltip": "",
            "type": "link",
            "url": "http://prometheus.io/docs/introduction/overview/"
          }
        ],
        "refresh": "5m",
        "rows": [
          {
            "collapse": false,
            "height": 161,
            "panels": [
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#bf1b00"
                ],
                "datasource": "prometheus",
                "decimals": 1,
                "format": "s",
                "gauge": {
                  "maxValue": 1000000,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "id": 41,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "time() - process_start_time_seconds{instance=\"$instance\"}",
                    "format": "time_series",
                    "instant": false,
                    "intervalFactor": 2,
                    "refId": "A"
                  }
                ],
                "thresholds": "",
                "title": "Uptime",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#bf1b00"
                ],
                "datasource": "prometheus",
                "format": "short",
                "gauge": {
                  "maxValue": 1000000,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "id": 42,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 4,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "prometheus_tsdb_head_series{instance=\"$instance\"}",
                    "format": "time_series",
                    "instant": false,
                    "intervalFactor": 2,
                    "refId": "A"
                  }
                ],
                "thresholds": "500000,800000,1000000",
                "title": "Total count of time series",
                "type": "singlestat",
                "valueFontSize": "150%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
                ],
                "datasource": "prometheus",
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "id": 48,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "version",
                "targets": [
                  {
                    "expr": "prometheus_build_info{instance=\"$instance\"}",
                    "format": "table",
                    "instant": true,
                    "intervalFactor": 2,
                    "refId": "A"
                  }
                ],
                "thresholds": "",
                "title": "Version",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "avg"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "format": "ms",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "id": 49,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "prometheus_tsdb_head_max_time{instance=\"$instance\"} - prometheus_tsdb_head_min_time{instance=\"$instance\"}",
                    "format": "time_series",
                    "instant": true,
                    "intervalFactor": 2,
                    "refId": "A"
                  }
                ],
                "thresholds": "",
                "title": "Actual head block length",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "content": "<img src=\"https://cdn.worldvectorlogo.com/logos/prometheus.svg\"/ height=\"140px\">",
                "height": "",
                "id": 50,
                "links": [],
                "mode": "html",
                "span": 1,
                "title": "",
                "transparent": true,
                "type": "text"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "#e6522c",
                  "rgba(237, 129, 40, 0.89)",
                  "#299c46"
                ],
                "datasource": "prometheus",
                "decimals": 1,
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "id": 52,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 1,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "2",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "refId": "A"
                  }
                ],
                "thresholds": "10,20",
                "title": "",
                "transparent": true,
                "type": "singlestat",
                "valueFontSize": "200%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "avg"
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Header instance info",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": "250",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 15,
                "legend": {
                  "avg": true,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "max(prometheus_engine_query_duration_seconds{instance=\"$instance\"}) by (instance, slice)",
                    "format": "time_series",
                    "intervalFactor": 1,
                    "legendFormat": "max duration for {{slice}}",
                    "metric": "prometheus_local_storage_rushed_mode",
                    "refId": "A",
                    "step": 900
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Query elapsed time",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "s",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 17,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(increase(prometheus_tsdb_head_series_created_total{instance=\"$instance\"}[$aggregation_interval])) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "created on {{ instance }}",
                    "metric": "prometheus_local_storage_maintain_series_duration_seconds_count",
                    "refId": "A",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_tsdb_head_series_removed_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) * -1",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "removed on {{ instance }}",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Head series created/deleted",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 13,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(increase(prometheus_target_scrapes_exceeded_sample_limit_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "exceeded_sample_limit on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "A",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_target_scrapes_sample_duplicate_timestamp_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "duplicate_timestamp on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "B",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_target_scrapes_sample_out_of_bounds_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "out_of_bounds on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "C",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_target_scrapes_sample_out_of_order_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "out_of_order on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "D",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_rule_evaluation_failures_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "rule_evaluation_failure on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "G",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_tsdb_compactions_failed_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "tsdb_compactions_failed on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "K",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_tsdb_reloads_failures_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "tsdb_reloads_failures on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "L",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_tsdb_head_series_not_found{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "head_series_not_found on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "N",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_evaluator_iterations_missed_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "evaluator_iterations_missed on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "O",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_evaluator_iterations_skipped_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "evaluator_iterations_skipped on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "P",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Prometheus errors",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Main info",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "description": "",
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {},
                "id": 25,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": true,
                  "min": false,
                  "show": false,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "prometheus_target_interval_length_seconds{instance=\"$instance\",quantile=\"0.99\"} - $scrape_interval",
                    "format": "time_series",
                    "interval": "2m",
                    "intervalFactor": 1,
                    "legendFormat": "{{instance}}",
                    "metric": "",
                    "refId": "A",
                    "step": 300
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Scrape delay (counts with 1m scrape interval)",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "s",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 14,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [
                  {
                    "alias": "Queue length",
                    "yaxis": 2
                  }
                ],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_evaluator_duration_seconds{instance=\"$instance\"}) by (instance, quantile)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Queue length",
                    "metric": "prometheus_local_storage_indexing_queue_length",
                    "refId": "B",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Rule evaulation duration",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "s",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": true,
            "title": "Scrape & rule duration",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 18,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(increase(http_requests_total{instance=\"$instance\"}[$aggregation_interval])) by (instance, handler) > 0",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "{{ handler }} on {{ instance }}",
                    "metric": "",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Request count",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 16,
                "legend": {
                  "avg": false,
                  "current": false,
                  "hideEmpty": true,
                  "hideZero": true,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "max(sum(http_request_duration_microseconds{instance=\"$instance\"}) by (instance, handler, quantile)) by (instance, handler) > 0",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{ handler }} on {{ instance }}",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Request duration per handler",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "µs",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 19,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(increase(http_request_size_bytes{instance=\"$instance\", quantile=\"0.99\"}[$aggregation_interval])) by (instance, handler) > 0",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{ handler }} in {{ instance }}",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Request size by handler",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Allocated bytes": "#F9BA8F",
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max count collector": "#bf1b00",
                  "Max count harvester": "#bf1b00",
                  "Max to persist": "#3F6833",
                  "RSS": "#890F02"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 8,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [
                  {
                    "alias": "/Max.*/",
                    "fill": 0,
                    "linewidth": 2
                  }
                ],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_engine_queries{instance=\"$instance\"}) by (instance, handler)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Current count ",
                    "metric": "last",
                    "refId": "A",
                    "step": 1800
                  },
                  {
                    "expr": "sum(prometheus_engine_queries_concurrent_max{instance=\"$instance\"}) by (instance, handler)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Max count",
                    "metric": "last",
                    "refId": "B",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Cont of concurent queries",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": true,
            "title": "Requests & queries",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {
                  "Alert queue capacity on o collector": "#bf1b00",
                  "Alert queue capacity on o harvester": "#bf1b00",
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 20,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [
                  {
                    "alias": "/.*capacity.*/",
                    "fill": 0,
                    "linewidth": 2
                  }
                ],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_notifications_queue_capacity{instance=\"$instance\"})by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Alert queue capacity ",
                    "metric": "prometheus_local_storage_checkpoint_last_size_bytes",
                    "refId": "A",
                    "step": 1800
                  },
                  {
                    "expr": "sum(prometheus_notifications_queue_length{instance=\"$instance\"})by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Alert queue size on ",
                    "metric": "prometheus_local_storage_checkpoint_last_size_bytes",
                    "refId": "B",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Alert queue size",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 21,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_notifications_alertmanagers_discovered{instance=\"$instance\"}) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Checkpoint chunks written/s",
                    "metric": "prometheus_local_storage_checkpoint_series_chunks_written_sum",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Count of discovered alertmanagers",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 39,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(increase(prometheus_notifications_dropped_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "notifications_dropped on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "F",
                    "step": 1800
                  },
                  {
                    "expr": "sum(increase(prometheus_rule_evaluation_failures_total{rule_type=\"alerting\",instance=\"$instance\"}[$aggregation_interval])) by (rule_type,instance) > 0",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "rule_evaluation_failures on {{ instance }}",
                    "metric": "prometheus_local_storage_chunk_ops_total",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Alerting errors",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": true,
            "title": "Alerting",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 36,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(increase(prometheus_tsdb_reloads_total{instance=\"$instance\"}[30m])) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "{{ instance }}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Reloaded block from disk",
                "tooltip": {
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 5,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_tsdb_blocks_loaded{instance=\"$instance\"}) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Loaded data blocks",
                    "metric": "prometheus_local_storage_memory_chunkdescs",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Loaded data blocks",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 3,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "prometheus_tsdb_head_series{instance=\"$instance\"}",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Time series count",
                    "metric": "prometheus_local_storage_memory_series",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Time series total count",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 1,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(prometheus_tsdb_head_samples_appended_total{instance=\"$instance\"}[$aggregation_interval])) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "samples/s {{instance}}",
                    "metric": "prometheus_local_storage_ingested_samples_total",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Samples Appended per second",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": true,
            "title": "TSDB stats",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833",
                  "To persist": "#9AC48A"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 2,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [
                  {
                    "alias": "/Max.*/",
                    "fill": 0
                  }
                ],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_tsdb_head_chunks{instance=\"$instance\"}) by (instance)",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Head chunk count",
                    "metric": "prometheus_local_storage_memory_chunks",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Head chunks count",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 35,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "max(prometheus_tsdb_head_max_time{instance=\"$instance\"}) by (instance) - min(prometheus_tsdb_head_min_time{instance=\"$instance\"}) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "{{ instance }}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Length of head block",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "ms",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 4,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(prometheus_tsdb_head_chunks_created_total{instance=\"$instance\"}[$aggregation_interval])) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "created on {{ instance }}",
                    "refId": "B"
                  },
                  {
                    "expr": "sum(rate(prometheus_tsdb_head_chunks_removed_total{instance=\"$instance\"}[$aggregation_interval])) by (instance) * -1",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "deleted on {{ instance }}",
                    "refId": "C"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Head Chunks Created/Deleted per second",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": true,
            "title": "Head block stats",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 33,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(increase(prometheus_tsdb_compaction_duration_sum{instance=\"$instance\"}[30m]) / increase(prometheus_tsdb_compaction_duration_count{instance=\"$instance\"}[30m])) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "{{ instance }}",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Compaction duration",
                "tooltip": {
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "s",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 34,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_tsdb_head_gc_duration_seconds{instance=\"$instance\"}) by (instance, quantile)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "{{ quantile }} on {{ instance }}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Go Garbage collection duration",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "s",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 37,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(prometheus_tsdb_wal_truncate_duration_seconds{instance=\"$instance\"}) by (instance, quantile)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "{{ quantile }} on {{ instance }}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "WAL truncate duration seconds",
                "tooltip": {
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 38,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 3,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(tsdb_wal_fsync_duration_seconds{instance=\"$instance\"}) by (instance, quantile)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "{{ quantile }} {{ instance }}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "WAL fsync duration seconds",
                "tooltip": {
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "s",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": true,
            "title": "Data maintenance",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {
                  "Allocated bytes": "#7EB26D",
                  "Allocated bytes - 1m max": "#BF1B00",
                  "Allocated bytes - 1m min": "#BF1B00",
                  "Allocated bytes - 5m max": "#BF1B00",
                  "Allocated bytes - 5m min": "#BF1B00",
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833",
                  "RSS": "#447EBC"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 6,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [
                  {
                    "alias": "/-/",
                    "fill": 0
                  },
                  {
                    "alias": "collector heap size",
                    "color": "#E0752D",
                    "fill": 0,
                    "linewidth": 2
                  },
                  {
                    "alias": "collector kubernetes memory limit",
                    "color": "#BF1B00",
                    "fill": 0,
                    "linewidth": 3
                  }
                ],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(process_resident_memory_bytes{instance=\"$instance\"}) by (instance)",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Total resident memory - {{instance}}",
                    "metric": "process_resident_memory_bytes",
                    "refId": "B",
                    "step": 1800
                  },
                  {
                    "expr": "sum(go_memstats_alloc_bytes{instance=\"$instance\"}) by (instance)",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Total llocated bytes - {{instance}}",
                    "metric": "go_memstats_alloc_bytes",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Memory",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {
                  "Allocated bytes": "#F9BA8F",
                  "Chunks": "#1F78C1",
                  "Chunks to persist": "#508642",
                  "Max chunks": "#052B51",
                  "Max to persist": "#3F6833",
                  "RSS": "#890F02"
                },
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 7,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "rate(go_memstats_alloc_bytes_total{instance=\"$instance\"}[$aggregation_interval])",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "Allocated Bytes/s",
                    "metric": "go_memstats_alloc_bytes",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Allocations per second",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 1,
                "id": 9,
                "legend": {
                  "alignAsTable": false,
                  "avg": false,
                  "current": false,
                  "hideEmpty": false,
                  "max": false,
                  "min": false,
                  "rightSide": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 4,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(process_cpu_seconds_total{instance=\"$instance\"}[$aggregation_interval])) by (instance)",
                    "format": "time_series",
                    "intervalFactor": 2,
                    "legendFormat": "CPU/s",
                    "metric": "prometheus_local_storage_ingested_samples_total",
                    "refId": "B",
                    "step": 1800
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "CPU per second",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [
                    "avg"
                  ]
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": true,
            "title": "RAM&CPU",
            "titleSize": "h6"
          }
        ],
        "schemaVersion": 14,
        "style": "dark",
        "tags": [
          "prometheus"
        ],
        "templating": {
          "list": [
            {
              "auto": true,
              "auto_count": 30,
              "auto_min": "2m",
              "current": {
                "text": "auto",
                "value": "$__auto_interval"
              },
              "hide": 0,
              "label": "aggregation interval",
              "name": "aggregation_interval",
              "options": [
                {
                  "selected": true,
                  "text": "auto",
                  "value": "$__auto_interval"
                },
                {
                  "selected": false,
                  "text": "1m",
                  "value": "1m"
                },
                {
                  "selected": false,
                  "text": "10m",
                  "value": "10m"
                },
                {
                  "selected": false,
                  "text": "30m",
                  "value": "30m"
                },
                {
                  "selected": false,
                  "text": "1h",
                  "value": "1h"
                },
                {
                  "selected": false,
                  "text": "6h",
                  "value": "6h"
                },
                {
                  "selected": false,
                  "text": "12h",
                  "value": "12h"
                },
                {
                  "selected": false,
                  "text": "1d",
                  "value": "1d"
                }
              ],
              "query": "1m,10m,30m,1h,6h,12h,1d",
              "refresh": 2,
              "type": "interval"
            },
            {
              "allValue": null,
              "current": {},
              "datasource": "prometheus",
              "hide": 0,
              "includeAll": false,
              "label": "Instance",
              "multi": false,
              "name": "instance",
              "options": [],
              "query": "label_values(prometheus_build_info, instance)",
              "refresh": 2,
              "regex": "",
              "sort": 2,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            },
            {
              "current": {
                "value": "60",
                "text": "60"
              },
              "hide": 0,
              "label": "Scrape interval seconds",
              "name": "scrape_interval",
              "options": [
                {
                  "value": "60",
                  "text": "60"
                }
              ],
              "query": "60",
              "type": "constant"
            }
          ]
        },
        "time": {
          "from": "now-1d",
          "to": "now"
        },
        "timepicker": {
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h"
          ]
        },
        "timezone": "browser",
        "title": "Prometheus Stats",
        "version": 8
      }  
  kubernetes-cluster-monitoring.json: |-
      {
        "__inputs": [
          {
            "name": "DS_PROMETHEUS",
            "label": "Prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          }
        ],
        "__requires": [
          {
            "type": "panel",
            "id": "graph",
            "name": "Graph",
            "version": ""
          },
          {
            "type": "panel",
            "id": "singlestat",
            "name": "Singlestat",
            "version": ""
          },
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "3.1.1"
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.3.0"
          }
        ],
        "id": null,
        "title": "Kubernetes cluster monitoring (via Prometheus)",
        "description": "Monitors Kubernetes cluster using Prometheus. Shows overall cluster CPU / Memory / Filesystem usage as well as individual pod, containers, systemd services statistics. Uses cAdvisor metrics only.",
        "tags": [
          "kubernetes"
        ],
        "style": "dark",
        "timezone": "browser",
        "editable": true,
        "hideControls": false,
        "sharedCrosshair": false,
        "rows": [
          {
            "collapse": false,
            "editable": true,
            "height": "200px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)",
                  "thresholdLine": false
                },
                "height": "200px",
                "id": 32,
                "isNew": true,
                "legend": {
                  "alignAsTable": false,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": false,
                  "show": false,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum (rate (container_network_receive_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[5m]))",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "Received",
                    "metric": "network",
                    "refId": "A",
                    "step": 10
                  },
                  {
                    "expr": "- sum (rate (container_network_transmit_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[5m]))",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "Sent",
                    "metric": "network",
                    "refId": "B",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Network I/O pressure",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 0,
                  "value_type": "cumulative"
                },
                "transparent": false,
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "Bps",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "Bps",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "Network I/O pressure"
          },
          {
            "collapse": false,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "format": "percent",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": true,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "180px",
                "id": 4,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 4,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) / sum (machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "65, 90",
                "title": "Cluster memory usage",
                "transparent": false,
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "percent",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": true,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "180px",
                "id": 6,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 4,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) / sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "65, 90",
                "title": "Cluster CPU usage (5m avg)",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "percent",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": true,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "180px",
                "id": 7,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 4,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (container_fs_usage_bytes{device=~\"^/dev/[sv]da[1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) / sum (container_fs_limit_bytes{device=~\"^/dev/[sv]da[1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) * 100",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "metric": "",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "65, 90",
                "title": "Cluster filesystem usage",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 9,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "20%",
                "prefix": "",
                "prefixFontSize": "20%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "",
                "title": "Used",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 10,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"})",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "",
                "title": "Total",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 11,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": " cores",
                "postfixFontSize": "30%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[5m]))",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "",
                "title": "Used",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 12,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": " cores",
                "postfixFontSize": "30%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"})",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "",
                "title": "Total",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 13,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (container_fs_usage_bytes{device=~\"^/dev/[sv]da[1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "",
                "title": "Used",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 14,
                "interval": null,
                "isNew": true,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "targets": [
                  {
                    "expr": "sum (container_fs_limit_bytes{device=~\"^/dev/[sv]da[1-9]$\",id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": "",
                "title": "Total",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              }
            ],
            "showTitle": false,
            "title": "Total usage"
          },
          {
            "collapse": false,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 3,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "height": "",
                "id": 17,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (pod_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "{{ pod_name }}",
                    "metric": "container_cpu",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Pods CPU usage (5m avg)",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "transparent": false,
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": "cores",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "showTitle": false,
            "title": "Pods CPU usage"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 3,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "height": "",
                "id": 23,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{systemd_service_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (systemd_service_name)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "{{ systemd_service_name }}",
                    "metric": "container_cpu",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "System services CPU usage (5m avg)",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": "cores",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "System services CPU usage"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 3,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "height": "",
                "id": 24,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "hideEmpty": false,
                  "hideZero": false,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": null,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",container_name!=\"POD\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (container_name, pod_name)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "pod: {{ pod_name }} | {{ container_name }}",
                    "metric": "container_cpu",
                    "refId": "A",
                    "step": 10
                  },
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (kubernetes_io_hostname, name, image)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})",
                    "metric": "container_cpu",
                    "refId": "B",
                    "step": 10
                  },
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (kubernetes_io_hostname, rkt_container_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}",
                    "metric": "container_cpu",
                    "refId": "C",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Containers CPU usage (5m avg)",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": "cores",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "Containers CPU usage"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "500px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 3,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 20,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (id)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "{{ id }}",
                    "metric": "container_cpu",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "All processes CPU usage (5m avg)",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": "cores",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "repeat": null,
            "showTitle": false,
            "title": "All processes CPU usage"
          },
          {
            "collapse": false,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 25,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}) by (pod_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "{{ pod_name }}",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Pods memory usage",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "Pods memory usage"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 26,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (container_memory_working_set_bytes{systemd_service_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}) by (systemd_service_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "{{ systemd_service_name }}",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "System services memory usage",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "System services memory usage"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 27,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\",container_name!=\"POD\",kubernetes_io_hostname=~\"^$Node$\"}) by (container_name, pod_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "pod: {{ pod_name }} | {{ container_name }}",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "A",
                    "step": 10
                  },
                  {
                    "expr": "sum (container_memory_working_set_bytes{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}) by (kubernetes_io_hostname, name, image)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "B",
                    "step": 10
                  },
                  {
                    "expr": "sum (container_memory_working_set_bytes{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}) by (kubernetes_io_hostname, rkt_container_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "C",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Containers memory usage",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "Containers memory usage"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "500px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 28,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (container_memory_working_set_bytes{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) by (id)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "{{ id }}",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "All processes memory usage",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "All processes memory usage"
          },
          {
            "collapse": false,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 16,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum (rate (container_network_receive_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (pod_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "-> {{ pod_name }}",
                    "metric": "network",
                    "refId": "A",
                    "step": 10
                  },
                  {
                    "expr": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (pod_name)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "<- {{ pod_name }}",
                    "metric": "network",
                    "refId": "B",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Pods network I/O (5m avg)",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "Bps",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "Pods network I/O"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 30,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum (rate (container_network_receive_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (container_name, pod_name)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "-> pod: {{ pod_name }} | {{ container_name }}",
                    "metric": "network",
                    "refId": "B",
                    "step": 10
                  },
                  {
                    "expr": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (container_name, pod_name)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "<- pod: {{ pod_name }} | {{ container_name }}",
                    "metric": "network",
                    "refId": "D",
                    "step": 10
                  },
                  {
                    "expr": "sum (rate (container_network_receive_bytes_total{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (kubernetes_io_hostname, name, image)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "-> docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})",
                    "metric": "network",
                    "refId": "A",
                    "step": 10
                  },
                  {
                    "expr": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",name!~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (kubernetes_io_hostname, name, image)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "<- docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name }})",
                    "metric": "network",
                    "refId": "C",
                    "step": 10
                  },
                  {
                    "expr": "sum (rate (container_network_transmit_bytes_total{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (kubernetes_io_hostname, rkt_container_name)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "-> rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}",
                    "metric": "network",
                    "refId": "E",
                    "step": 10
                  },
                  {
                    "expr": "- sum (rate (container_network_transmit_bytes_total{rkt_container_name!=\"\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (kubernetes_io_hostname, rkt_container_name)",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "<- rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}",
                    "metric": "network",
                    "refId": "F",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Containers network I/O (5m avg)",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "Bps",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "Containers network I/O"
          },
          {
            "collapse": true,
            "editable": true,
            "height": "500px",
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 29,
                "isNew": true,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sideWidth": 200,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 12,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum (rate (container_network_receive_bytes_total{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (id)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "-> {{ id }}",
                    "metric": "network",
                    "refId": "A",
                    "step": 10
                  },
                  {
                    "expr": "- sum (rate (container_network_transmit_bytes_total{id!=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (id)",
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "<- {{ id }}",
                    "metric": "network",
                    "refId": "B",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "All processes network I/O (5m avg)",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "Bps",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "All processes network I/O"
          }
        ],
        "time": {
          "from": "now-5m",
          "to": "now"
        },
        "timepicker": {
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "templating": {
          "list": [
            {
              "allValue": ".*",
              "current": {},
              "datasource": "prometheus",
              "hide": 0,
              "includeAll": true,
              "multi": false,
              "name": "Node",
              "options": [],
              "query": "label_values(kubernetes_io_hostname)",
              "refresh": 1,
              "type": "query"
            }
          ]
        },
        "annotations": {
          "list": []
        },
        "refresh": "10s",
        "schemaVersion": 12,
        "version": 13,
        "links": [],
        "gnetId": 315
      }  
  docker-host-container-monitoring.json: |-
      {
        "__inputs": [
          {
            "name": "DS_PROMETHEUS",
            "label": "Prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          }
        ],
        "__requires": [
          {
            "type": "panel",
            "id": "graph",
            "name": "Graph",
            "version": ""
          },
          {
            "type": "panel",
            "id": "table",
            "name": "Table",
            "version": ""
          },
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "3.1.1"
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
          }
        ],
        "id": null,
        "title": "Docker Host & Container Overview",
        "tags": [
          "docker"
        ],
        "style": "dark",
        "timezone": "browser",
        "editable": true,
        "hideControls": false,
        "sharedCrosshair": true,
        "rows": [
          {
            "collapse": false,
            "editable": true,
            "height": 143.625,
            "panels": [
              {
                "aliasColors": {
                  "SENT": "#BF1B00"
                },
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 5,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 19,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 1,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 2,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(container_network_receive_bytes_total{id=\"/\"}[$interval])) by (id)",
                    "intervalFactor": 2,
                    "legendFormat": "RECEIVED",
                    "refId": "A",
                    "step": 4
                  },
                  {
                    "expr": "- sum(rate(container_network_transmit_bytes_total{id=\"/\"}[$interval])) by (id)",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "SENT",
                    "refId": "B",
                    "step": 4
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Network Traffic on Node",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "cumulative"
                },
                "transparent": false,
                "type": "graph",
                "xaxis": {
                  "show": false
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {
                  "Ops-Infrastructure": "#447EBC",
                  "{}": "#DEDAF7"
                },
                "bars": true,
                "datasource": "prometheus",
                "decimals": 0,
                "editable": true,
                "error": false,
                "fill": 3,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 7,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": false,
                "linewidth": 3,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 10,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 1.9899973849372385,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "count(rate(container_last_seen{name=~\".+\",container_group=\"monitoring\"}[$interval]))",
                    "intervalFactor": 2,
                    "legendFormat": "Monitoring",
                    "metric": "container_last_seen",
                    "refId": "A",
                    "step": 4
                  },
                  {
                    "expr": "count(rate(container_last_seen{name=~\".+\",container_group=\"ops-infrastructure\"}[$interval]))",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Backend-Infrastructure",
                    "refId": "B",
                    "step": 4
                  },
                  {
                    "expr": "count(rate(container_last_seen{name=~\".+\",container_group=\"backend-infrastructure\"}[$interval]))",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "Backend-Workers",
                    "refId": "C",
                    "step": 4
                  },
                  {
                    "expr": "count(rate(container_last_seen{name=~\".+\",container_group=\"backend-workers\"}[$interval]))",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Ops-Infrastructure",
                    "refId": "D",
                    "step": 4
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Running Containers (by Container Group)",
                "tooltip": {
                  "msResolution": false,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "show": false
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": 0,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {
                  "{id=\"/\",instance=\"cadvisor:8080\",job=\"prometheus\"}": "#BA43A9"
                },
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 3,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 5,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 2.0707047594142263,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(container_cpu_system_seconds_total[2m]))",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "a",
                    "refId": "B",
                    "step": 120
                  },
                  {
                    "expr": "sum(rate(container_cpu_system_seconds_total{name=~\".+\"}[2m]))",
                    "hide": true,
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "nur container",
                    "refId": "F",
                    "step": 10
                  },
                  {
                    "expr": "sum(rate(container_cpu_system_seconds_total{id=\"/\"}[2m]))",
                    "hide": true,
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "nur docker host",
                    "metric": "",
                    "refId": "A",
                    "step": 20
                  },
                  {
                    "expr": "sum(rate(process_cpu_seconds_total[$interval])) * 100",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "host",
                    "metric": "",
                    "refId": "C",
                    "step": 4
                  },
                  {
                    "expr": "sum(rate(container_cpu_system_seconds_total{name=~\".+\"}[2m])) + sum(rate(container_cpu_system_seconds_total{id=\"/\"}[2m])) + sum(rate(process_cpu_seconds_total[2m]))",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "",
                    "refId": "D",
                    "step": 120
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "CPU Usage on Node",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": false
                },
                "yaxes": [
                  {
                    "format": "percent",
                    "label": "",
                    "logBase": 1,
                    "max": 120,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {
                  "Belegete Festplatte": "#BF1B00",
                  "Free Disk Space": "#7EB26D",
                  "Used Disk Space": "#BF1B00",
                  "{}": "#BF1B00"
                },
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 4,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 13,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 3,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 2,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "node_filesystem_free{fstype=\"aufs\"}",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Free Disk Space",
                    "refId": "A",
                    "step": 4
                  },
                  {
                    "expr": "node_filesystem_size{fstype=\"aufs\"} - node_filesystem_free{fstype=\"aufs\"}",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Used Disk Space",
                    "refId": "B",
                    "step": 4
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Free and Used Disk Space on Node",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "show": false
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": 0,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {
                  "Available Memory": "#7EB26D",
                  "Unavailable Memory": "#BF1B00"
                },
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 4,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 20,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 3,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 2,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "container_memory_rss{name=~\".+\"}",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "D",
                    "step": 30
                  },
                  {
                    "expr": "sum(container_memory_rss{name=~\".+\"})",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "A",
                    "step": 20
                  },
                  {
                    "expr": "container_memory_usage_bytes{name=~\".+\"}",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "B",
                    "step": 20
                  },
                  {
                    "expr": "container_memory_rss{id=\"/\"}",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "C",
                    "step": 30
                  },
                  {
                    "expr": "sum(container_memory_rss)",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "E",
                    "step": 30
                  },
                  {
                    "expr": "node_memory_Buffers",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "node_memory_Dirty",
                    "refId": "N",
                    "step": 30
                  },
                  {
                    "expr": "node_memory_MemFree",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "F",
                    "step": 30
                  },
                  {
                    "expr": "node_memory_MemAvailable",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Available Memory",
                    "refId": "H",
                    "step": 4
                  },
                  {
                    "expr": "node_memory_MemTotal - node_memory_MemAvailable",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "Unavailable Memory",
                    "refId": "G",
                    "step": 4
                  },
                  {
                    "expr": "node_memory_Inactive",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "I",
                    "step": 30
                  },
                  {
                    "expr": "node_memory_KernelStack",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "J",
                    "step": 30
                  },
                  {
                    "expr": "node_memory_Active",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "K",
                    "step": 30
                  },
                  {
                    "expr": "node_memory_MemTotal - (node_memory_Active + node_memory_MemFree + node_memory_Inactive)",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "Unknown",
                    "refId": "L",
                    "step": 40
                  },
                  {
                    "expr": "node_memory_MemFree + node_memory_Inactive ",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "M",
                    "step": 30
                  },
                  {
                    "expr": "container_memory_rss{name=~\".+\"}",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "refId": "O",
                    "step": 30
                  },
                  {
                    "expr": "node_memory_Inactive + node_memory_MemFree + node_memory_MemAvailable",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "",
                    "refId": "P",
                    "step": 40
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Available Memory on Node",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "show": false
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": "",
                    "logBase": 1,
                    "max": 4200000000,
                    "min": 0,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 3,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": false,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 1.939297855648535,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(node_disk_bytes_read[$interval])) by (device)",
                    "intervalFactor": 2,
                    "legendFormat": "OUT on /{{device}}",
                    "metric": "node_disk_bytes_read",
                    "refId": "A",
                    "step": 4
                  },
                  {
                    "expr": "sum(rate(node_disk_bytes_written[$interval])) by (device)",
                    "intervalFactor": 2,
                    "legendFormat": "IN on /{{device}}",
                    "metric": "",
                    "refId": "B",
                    "step": 4
                  },
                  {
                    "expr": "",
                    "intervalFactor": 2,
                    "refId": "C"
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Disk I/O on Node",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": false
                },
                "yaxes": [
                  {
                    "format": "Bps",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "New row"
          },
          {
            "collapse": false,
            "editable": true,
            "height": 284.609375,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 5,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 1,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 6.0790694124949285,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(container_cpu_usage_seconds_total{name=~\".+\"}[$interval])) by (name) * 100",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "metric": "container_cp",
                    "refId": "F",
                    "step": 2
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "CPU Usage per Container (Stacked)",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "percent",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {
                  "node_load15": "#CCA300"
                },
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 4,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": true,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 5.920930587505071,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "{__name__=~\"^node_load.*\"}",
                    "intervalFactor": 2,
                    "legendFormat": "{{__name__}}",
                    "metric": "node",
                    "refId": "A",
                    "step": 2
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "System Load on Node",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "title": "Row"
          },
          {
            "collapse": false,
            "editable": true,
            "height": 203.515625,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(247, 226, 2, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(244, 0, 0, 0.22)",
                  "thresholdLine": false
                },
                "id": 9,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "hideEmpty": false,
                  "hideZero": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(container_network_transmit_bytes_total{name=~\".+\"}[$interval])) by (name)",
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "A",
                    "step": 2
                  },
                  {
                    "expr": "rate(container_network_transmit_bytes_total{id=\"/\"}[$interval])",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "",
                    "refId": "B",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Sent Network Traffic per Container",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "cumulative"
                },
                "transparent": false,
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "Bps",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": "",
                    "logBase": 10,
                    "max": 8,
                    "min": 0,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 3,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 10,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 6,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(container_memory_rss{name=~\".+\"}) by (name)",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "A",
                    "step": 2
                  },
                  {
                    "expr": "container_memory_usage_bytes{name=~\".+\"}",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "B",
                    "step": 240
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Memory Usage per Container (Stacked)",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "title": "New row"
          },
          {
            "collapse": false,
            "editable": true,
            "height": 222.703125,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 1,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 8,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(container_network_receive_bytes_total{name=~\".+\"}[$interval])) by (name)",
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "A",
                    "step": 2
                  },
                  {
                    "expr": "- rate(container_network_transmit_bytes_total{name=~\".+\"}[$interval])",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "B",
                    "step": 10
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Received Network Traffic per Container",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "cumulative"
                },
                "transparent": false,
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "Bps",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fill": 3,
                "grid": {
                  "threshold1": null,
                  "threshold1Color": "rgba(216, 200, 27, 0.27)",
                  "threshold2": null,
                  "threshold2Color": "rgba(234, 112, 112, 0.22)"
                },
                "id": 11,
                "isNew": true,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "null as zero",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "span": 6,
                "stack": true,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "container_memory_rss{name=~\".+\"}",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "A",
                    "step": 20
                  },
                  {
                    "expr": "container_memory_usage_bytes{name=~\".+\"}",
                    "hide": true,
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "B",
                    "step": 20
                  },
                  {
                    "expr": "sum(container_memory_cache{name=~\".+\"}) by (name)",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "refId": "C",
                    "step": 2
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "Cached Memory per Container (Stacked)",
                "tooltip": {
                  "msResolution": true,
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "show": true
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "title": "New row"
          },
          {
            "collapse": false,
            "editable": true,
            "height": "250px",
            "panels": [
              {
                "columns": [
                  {
                    "text": "Avg",
                    "value": "avg"
                  }
                ],
                "datasource": "prometheus",
                "editable": true,
                "error": false,
                "fontSize": "100%",
                "hideTimeOverride": false,
                "id": 18,
                "isNew": true,
                "links": [],
                "pageSize": 100,
                "scroll": true,
                "showHeader": true,
                "sort": {
                  "col": 0,
                  "desc": true
                },
                "span": 6,
                "styles": [
                  {
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "pattern": "Time",
                    "type": "date"
                  },
                  {
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "decimals": 2,
                    "pattern": "/.*/",
                    "thresholds": [],
                    "type": "number",
                    "unit": "short"
                  }
                ],
                "targets": [
                  {
                    "expr": "cadvisor_version_info",
                    "intervalFactor": 2,
                    "legendFormat": "cAdvisor Version: {{cadvisorVersion}}",
                    "refId": "A",
                    "step": 2
                  },
                  {
                    "expr": "prometheus_build_info",
                    "intervalFactor": 2,
                    "legendFormat": "Prometheus Version: {{version}}",
                    "refId": "B",
                    "step": 2
                  },
                  {
                    "expr": "node_exporter_build_info",
                    "intervalFactor": 2,
                    "legendFormat": "Node-Exporter Version: {{version}}",
                    "refId": "C",
                    "step": 2
                  },
                  {
                    "expr": "cadvisor_version_info",
                    "intervalFactor": 2,
                    "legendFormat": "Docker Version: {{dockerVersion}}",
                    "refId": "D",
                    "step": 2
                  },
                  {
                    "expr": "cadvisor_version_info",
                    "intervalFactor": 2,
                    "legendFormat": "Host OS Version: {{osVersion}}",
                    "refId": "E",
                    "step": 2
                  },
                  {
                    "expr": "cadvisor_version_info",
                    "intervalFactor": 2,
                    "legendFormat": "Host Kernel Version: {{kernelVersion}}",
                    "refId": "F",
                    "step": 2
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "",
                "transform": "timeseries_aggregations",
                "type": "table"
              }
            ],
            "showTitle": false,
            "title": "Check this out"
          },
          {
            "collapse": false,
            "editable": true,
            "height": 290.98582985381427,
            "panels": [],
            "title": "New row"
          },
          {
            "collapse": false,
            "editable": true,
            "height": 127,
            "panels": [],
            "title": "New row"
          }
        ],
        "time": {
          "from": "now-15m",
          "to": "now"
        },
        "timepicker": {
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "templating": {
          "list": [
            {
              "allValue": ".+",
              "current": {},
              "datasource": "prometheus",
              "hide": 0,
              "includeAll": true,
              "label": "Container Group",
              "multi": true,
              "name": "containergroup",
              "options": [],
              "query": "label_values(container_group)",
              "refresh": 1,
              "regex": "",
              "type": "query"
            },
            {
              "auto": true,
              "auto_count": 50,
              "auto_min": "50s",
              "current": {
                "tags": [],
                "text": "auto",
                "value": "$__auto_interval"
              },
              "datasource": null,
              "hide": 0,
              "includeAll": false,
              "label": "Interval",
              "multi": false,
              "name": "interval",
              "options": [
                {
                  "selected": true,
                  "text": "auto",
                  "value": "$__auto_interval"
                },
                {
                  "selected": false,
                  "text": "30s",
                  "value": "30s"
                },
                {
                  "selected": false,
                  "text": "1m",
                  "value": "1m"
                },
                {
                  "selected": false,
                  "text": "2m",
                  "value": "2m"
                },
                {
                  "selected": false,
                  "text": "3m",
                  "value": "3m"
                },
                {
                  "selected": false,
                  "text": "5m",
                  "value": "5m"
                },
                {
                  "selected": false,
                  "text": "7m",
                  "value": "7m"
                },
                {
                  "selected": false,
                  "text": "10m",
                  "value": "10m"
                },
                {
                  "selected": false,
                  "text": "30m",
                  "value": "30m"
                },
                {
                  "selected": false,
                  "text": "1h",
                  "value": "1h"
                },
                {
                  "selected": false,
                  "text": "6h",
                  "value": "6h"
                },
                {
                  "selected": false,
                  "text": "12h",
                  "value": "12h"
                },
                {
                  "selected": false,
                  "text": "1d",
                  "value": "1d"
                },
                {
                  "selected": false,
                  "text": "7d",
                  "value": "7d"
                },
                {
                  "selected": false,
                  "text": "14d",
                  "value": "14d"
                },
                {
                  "selected": false,
                  "text": "30d",
                  "value": "30d"
                }
              ],
              "query": "30s,1m,2m,3m,5m,7m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
              "refresh": 0,
              "type": "interval"
            }
          ]
        },
        "annotations": {
          "list": []
        },
        "refresh": "10s",
        "schemaVersion": 12,
        "version": 0,
        "links": [],
        "gnetId": 395,
        "description": "A simple overview of the most important Docker host and container metrics. (cAdvisor/Prometheus)"
      }  
  ICP2.1-Performance.json: |-
      {
        "__inputs": [
          {
            "name": "DS_PROMETHEUS",
            "label": "prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          }
        ],
        "__requires": [
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "4.4.3"
          },
          {
            "type": "panel",
            "id": "graph",
            "name": "Graph",
            "version": ""
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
          },
          {
            "type": "panel",
            "id": "singlestat",
            "name": "Singlestat",
            "version": ""
          },
          {
            "type": "panel",
            "id": "table",
            "name": "Table",
            "version": ""
          },
          {
            "type": "panel",
            "id": "text",
            "name": "Text",
            "version": ""
          }
        ],
        "annotations": {
          "list": []
        },
        "description": "Monitors ICP cluster using Prometheus. Shows overall Metrics Summary (High Level KPIs , Container, Pod CPU and Memory.",
        "editable": true,
        "gnetId": 315,
        "graphTooltip": 0,
        "hideControls": false,
        "id": null,
        "links": [
          {
            "icon": "external link",
            "tags": [],
            "targetBlank": true,
            "title": "Kibana",
            "type": "link",
            "url": "https://<icp_IP_address>:8443/kibana"
          },
          {
            "asDropdown": true,
            "icon": "external link",
            "includeVars": false,
            "keepTime": true,
            "tags": [],
            "targetBlank": true,
            "title": "DashBoards",
            "type": "dashboards"
          }
        ],
        "refresh": false,
        "rows": [
          {
            "collapse": false,
            "height": 98,
            "panels": [
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "format": "s",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 33,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "20%",
                "prefix": "",
                "prefixFontSize": "20%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "time() - max(node_boot_time{instance=~\".*\"})",
                    "format": "time_series",
                    "hide": false,
                    "interval": "15m",
                    "intervalFactor": 2,
                    "legendFormat": "",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": "",
                "title": "Youngest Node Uptime",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 9,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "20%",
                "prefix": "",
                "prefixFontSize": "20%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "sum(node_memory_MemTotal)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "Total memory",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 10,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "sum(node_memory_MemAvailable)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "Available Memory",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "rgba(245, 54, 54, 0.9)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(50, 172, 45, 0.97)"
                ],
                "datasource": "prometheus",
                "format": "percent",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "id": 39,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": " sum(node_memory_MemAvailable) / sum(node_memory_MemTotal) * 100",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "refId": "A",
                    "step": 60
                  }
                ],
                "thresholds": "10,20",
                "title": "Memory Free",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": null,
                "format": "percent",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "id": 46,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{id=\"/\"}[15m])) / sum (machine_cpu_cores) * 100",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "refId": "A",
                    "step": 60
                  }
                ],
                "thresholds": "75,90",
                "title": "ICP Total CPU 15 Minute Average",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 11,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "30%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 1,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "avg(machine_cpu_cores)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "1s",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "metric": "machine_cpu_cores",
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "Avg. Machine Cores",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "content": "#####   Visit the CSMO-ICP  Git Hub Page.      ",
                "id": 43,
                "links": [
                  {
                    "targetBlank": true,
                    "title": "CSMO-ICP",
                    "type": "absolute",
                    "url": "https://ibm.biz/BdjCrN"
                  }
                ],
                "mode": "markdown",
                "span": 1,
                "title": "",
                "transparent": true,
                "type": "text"
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "ICP Usage Summary One",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 127,
            "panels": [
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "format": "s",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 40,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "20%",
                "prefix": "",
                "prefixFontSize": "20%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "time() - min(node_boot_time{instance=~\".*\"})",
                    "format": "time_series",
                    "hide": false,
                    "interval": "15m",
                    "intervalFactor": 2,
                    "legendFormat": "",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": "",
                "title": "Oldest Node Uptime",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 14,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "sum(node_filesystem_size)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "metric": "container_fs_limit_bytes",
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "Total Disk Space",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "format": "bytes",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 13,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "sum(node_filesystem_free)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "Disk Space Available",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": true,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": 1,
                "editable": true,
                "error": false,
                "format": "percentunit",
                "gauge": {
                  "maxValue": 1,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "100px",
                "hideTimeOverride": false,
                "id": 7,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "min((node_filesystem_size{fstype=~\"xfs|ext4\"} - node_filesystem_free{fstype=~\"xfs|ext4\"} )/ node_filesystem_size{fstype=~\"xfs|ext4\"})",
                    "format": "time_series",
                    "hide": false,
                    "interval": "15m",
                    "intervalFactor": 2,
                    "legendFormat": "",
                    "metric": "",
                    "refId": "A",
                    "step": 1800
                  }
                ],
                "thresholds": "0.75, 0.90",
                "title": "Disk Space Used",
                "type": "singlestat",
                "valueFontSize": "80%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 32,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "30%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 2,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "count(rate(container_last_seen{name=~\".+\"}[5m]))",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "metric": "kubelet_running_pod_count",
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "Active Containers Last 5 min",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 12,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "30%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 1,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "sum(kubelet_running_pod_count) ",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "metric": "kubelet_running_pod_count",
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "Active Pods",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "rgba(50, 172, 45, 0.97)",
                  "rgba(237, 129, 40, 0.89)",
                  "rgba(245, 54, 54, 0.9)"
                ],
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "height": "1px",
                "id": 31,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "30%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "span": 1,
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": false
                },
                "tableColumn": "",
                "targets": [
                  {
                    "expr": "sum(kube_node_info)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "metric": "machine_cpu_cores",
                    "refId": "A",
                    "step": 30
                  }
                ],
                "thresholds": "",
                "title": "ICP Node Count",
                "type": "singlestat",
                "valueFontSize": "50%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "N/A",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "ICP Usage Summary Two",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 354,
            "panels": [
              {
                "columns": [],
                "datasource": "prometheus",
                "fontSize": "100%",
                "hideTimeOverride": true,
                "id": 35,
                "links": [],
                "minSpan": 1,
                "pageSize": 5,
                "scroll": true,
                "showHeader": true,
                "sort": {
                  "col": 3,
                  "desc": false
                },
                "span": 2,
                "styles": [
                  {
                    "alias": "Time",
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "pattern": "Time",
                    "type": "hidden"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "app",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "component",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "job",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "kubernetes_namespace",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "kubernetes_name",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "Percent",
                    "colorMode": "cell",
                    "colors": [
                      "rgba(50, 172, 45, 0.97)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(245, 54, 54, 0.9)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "Value",
                    "thresholds": [
                      "70",
                      "90"
                    ],
                    "type": "number",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "decimals": 2,
                    "pattern": "/.*/",
                    "thresholds": [],
                    "type": "number",
                    "unit": "short"
                  }
                ],
                "targets": [
                  {
                    "expr": "((node_memory_MemTotal - node_memory_MemAvailable) / node_memory_MemTotal) * 100",
                    "format": "table",
                    "hide": false,
                    "interval": "1s",
                    "intervalFactor": 2,
                    "refId": "A",
                    "step": 2
                  }
                ],
                "timeFrom": "1s",
                "title": "Memory by node",
                "transform": "table",
                "transparent": false,
                "type": "table"
              },
              {
                "columns": [],
                "fontSize": "100%",
                "hideTimeOverride": true,
                "id": 37,
                "links": [],
                "minSpan": 5,
                "pageSize": 5,
                "scroll": true,
                "showHeader": true,
                "sort": {
                  "col": 3,
                  "desc": true
                },
                "span": 5,
                "styles": [
                  {
                    "alias": "Time",
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "pattern": "Time",
                    "type": "hidden"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(50, 172, 45, 0.97)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(245, 54, 54, 0.9)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "",
                    "thresholds": [
                      ""
                    ],
                    "type": "number",
                    "unit": "short"
                  },
                  {
                    "alias": "utilization",
                    "colorMode": "cell",
                    "colors": [
                      "rgba(50, 172, 45, 0.97)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(245, 54, 54, 0.9)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "Value",
                    "thresholds": [
                      "70",
                      "80"
                    ],
                    "type": "number",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "decimals": 2,
                    "pattern": "/.*/",
                    "thresholds": [],
                    "type": "number",
                    "unit": "short"
                  }
                ],
                "targets": [
                  {
                    "expr": "topk(5,  sum(rate(container_cpu_usage_seconds_total{name=~\".+\"}[5m])) by (name,namespace)) * 100",
                    "format": "table",
                    "hide": false,
                    "interval": "1s",
                    "intervalFactor": 5,
                    "legendFormat": " ",
                    "metric": "",
                    "refId": "A",
                    "step": 5
                  }
                ],
                "timeFrom": "1s",
                "timeShift": null,
                "title": "Top 5 Containers by CPU",
                "transform": "table",
                "type": "table"
              },
              {
                "columns": [],
                "fontSize": "100%",
                "hideTimeOverride": true,
                "id": 38,
                "links": [],
                "pageSize": 5,
                "scroll": true,
                "showHeader": true,
                "sort": {
                  "col": 2,
                  "desc": true
                },
                "span": 5,
                "styles": [
                  {
                    "alias": "Time",
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "pattern": "Time",
                    "type": "hidden"
                  },
                  {
                    "alias": "memory",
                    "colorMode": "cell",
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "Value",
                    "thresholds": [
                      "15",
                      "20"
                    ],
                    "type": "number",
                    "unit": "decbytes"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "image",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "decimals": 2,
                    "pattern": "/.*/",
                    "thresholds": [],
                    "type": "number",
                    "unit": "short"
                  }
                ],
                "targets": [
                  {
                    "expr": "topk (5, (sum(container_memory_usage_bytes{image!=\"\"}) by (name, namespace)))",
                    "format": "table",
                    "hide": false,
                    "interval": "1s",
                    "intervalFactor": 2,
                    "legendFormat": "",
                    "refId": "A",
                    "step": 2
                  }
                ],
                "timeFrom": "1s",
                "title": "Top 5 Container by Memory",
                "transform": "table",
                "transparent": true,
                "type": "table"
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Top Five",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {},
                "height": "",
                "hideTimeOverride": false,
                "id": 17,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": 6,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": true,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum(rate(container_cpu_usage_seconds_total{name=~\".+\"}[$interval])) by (name) * 100",
                    "format": "time_series",
                    "hide": false,
                    "interval": "1m",
                    "intervalFactor": 2,
                    "legendFormat": "{{name}}",
                    "metric": "",
                    "refId": "A",
                    "step": 120
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Container CPU Utilization",
                "tooltip": {
                  "msResolution": true,
                  "shared": false,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "transparent": false,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": "CPU Percentage",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Dashboard Row",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 217,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "decimals": 2,
                "editable": true,
                "error": false,
                "fill": 2,
                "grid": {},
                "id": 25,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sideWidth": 200,
                  "sortDesc": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 3,
                "links": [],
                "nullPointMode": "connected",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 12,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sort_desc(sum(container_memory_usage_bytes{image!=\"\"}) by (name, image))",
                    "format": "time_series",
                    "hide": false,
                    "interval": "10s",
                    "intervalFactor": 1,
                    "legendFormat": "{{ name }}",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Container Memory Usage",
                "tooltip": {
                  "msResolution": false,
                  "shared": false,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Pods memory usage",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 272,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "decimals": null,
                "editable": true,
                "error": false,
                "fill": 0,
                "grid": {},
                "height": "",
                "hideTimeOverride": false,
                "id": 44,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "links": [],
                "nullPointMode": "connected",
                "percentage": true,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": true,
                "targets": [
                  {
                    "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\"}[$interval])) by (pod_name)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "1m",
                    "intervalFactor": 2,
                    "legendFormat": "{{ pod_name }}",
                    "metric": "",
                    "refId": "A",
                    "step": 120
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Pod CPU Utilization",
                "tooltip": {
                  "msResolution": true,
                  "shared": false,
                  "sort": 2,
                  "value_type": "cumulative"
                },
                "transparent": false,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "none",
                    "label": "CPU Second Second Avg by Interval",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 2,
                "id": 47,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 3,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 6,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\"}) by (pod_name)",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{ pod_name }}",
                    "metric": "container_memory_usage:sort_desc",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Pods Memory Usage",
                "tooltip": {
                  "shared": false,
                  "sort": 1,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "decbytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Pods",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 2,
                "id": 34,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "hideEmpty": false,
                  "hideZero": false,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 3,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 12,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "node_load15",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{instance}} 15min",
                    "refId": "A",
                    "step": 4
                  },
                  {
                    "expr": "node_load5",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{instance}} 5min",
                    "refId": "B",
                    "step": 4
                  },
                  {
                    "expr": "node_load1",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{instance}} 1min",
                    "metric": "",
                    "refId": "C",
                    "step": 4
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Worker Nodes 15, 5, 1 Load Average",
                "tooltip": {
                  "shared": false,
                  "sort": 1,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Load Avg.",
            "titleSize": "h6"
          }
        ],
        "schemaVersion": 14,
        "style": "dark",
        "tags": [],
        "templating": {
          "list": [
            {
              "auto": false,
              "auto_count": 50,
              "auto_min": "50s",
              "current": {
                "text": "5m",
                "value": "5m"
              },
              "hide": 0,
              "label": "interval",
              "name": "interval",
              "options": [
                {
                  "selected": true,
                  "text": "5m",
                  "value": "5m"
                },
                {
                  "selected": false,
                  "text": "10m",
                  "value": "10m"
                },
                {
                  "selected": false,
                  "text": "15m",
                  "value": "15m"
                },
                {
                  "selected": false,
                  "text": "30m",
                  "value": "30m"
                },
                {
                  "selected": false,
                  "text": "1h",
                  "value": "1h"
                },
                {
                  "selected": false,
                  "text": "6h",
                  "value": "6h"
                },
                {
                  "selected": false,
                  "text": "12h",
                  "value": "12h"
                },
                {
                  "selected": false,
                  "text": "1d",
                  "value": "1d"
                },
                {
                  "selected": false,
                  "text": "7d",
                  "value": "7d"
                },
                {
                  "selected": false,
                  "text": "14d",
                  "value": "14d"
                },
                {
                  "selected": false,
                  "text": "30d",
                  "value": "30d"
                }
              ],
              "query": "5m,10m,15m,30m,1h,6h,12h,1d,7d,14d,30d",
              "refresh": 2,
              "type": "interval"
            }
          ]
        },
        "time": {
          "from": "now-1h",
          "to": "now"
        },
        "timepicker": {
          "nowDelay": "",
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "timezone": "browser",
        "title": "ICP 2.1 Performance IBM Provided 2.5",
        "version": 6
      }  
  ICP2.1-Namespaces-Performance.json: |-
      {
        "__inputs": [
          {
            "name": "DS_PROMETHEUS",
            "label": "prometheus",
            "description": "",
            "type": "datasource",
            "pluginId": "prometheus",
            "pluginName": "Prometheus"
          }
        ],
        "__requires": [
          {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "4.4.3"
          },
          {
            "type": "panel",
            "id": "graph",
            "name": "Graph",
            "version": ""
          },
          {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
          },
          {
            "type": "panel",
            "id": "table",
            "name": "Table",
            "version": ""
          }
        ],
        "annotations": {
          "list": []
        },
        "description": "Monitors Kubernetes cluster using Prometheus. Shows overall cluster CPU / Memory / Filesystem usage as well as individual pod, containers, systemd services statistics. Uses cAdvisor metrics only.",
        "editable": true,
        "gnetId": 315,
        "graphTooltip": 0,
        "hideControls": false,
        "id": null,
        "links": [
          {
            "asDropdown": true,
            "icon": "external link",
            "includeVars": true,
            "keepTime": true,
            "tags": [],
            "targetBlank": true,
            "title": "Dashboards",
            "type": "dashboards"
          }
        ],
        "refresh": false,
        "rows": [
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 39,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 12,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"$namespace\"}[$interval])) by (pod_name) * 100",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{ pod_name }}",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Namespace \"$namespace\"  CPU by pod name",
                "tooltip": {
                  "shared": false,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "$namespace CPU",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "prometheus",
                "fill": 1,
                "id": 38,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "rightSide": true,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "percentage": false,
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "span": 12,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": " sort_desc(sum(container_memory_usage_bytes{image!=\"\", namespace=\"$namespace\"}) by (pod_name, image))",
                    "format": "time_series",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{ pod_name }}",
                    "refId": "A",
                    "step": 10
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeShift": null,
                "title": "Namespace  \"$namespace\"  Memory by pod name",
                "tooltip": {
                  "shared": false,
                  "sort": 1,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ]
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "$namespace Memory",
            "titleSize": "h6"
          },
          {
            "collapse": false,
            "height": 250,
            "panels": [
              {
                "columns": [],
                "fontSize": "100%",
                "id": 40,
                "links": [],
                "pageSize": null,
                "scroll": true,
                "showHeader": true,
                "sort": {
                  "col": null,
                  "desc": false
                },
                "span": 12,
                "styles": [
                  {
                    "alias": "Time",
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "pattern": "Time",
                    "type": "date"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "app",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "chart",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "kubernetes_namespace",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "kubernetes_name",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "job",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "release",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": "cell",
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": null,
                    "pattern": "Value",
                    "thresholds": [
                      "0",
                      "1"
                    ],
                    "type": "number",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "component",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  },
                  {
                    "alias": "",
                    "colorMode": null,
                    "colors": [
                      "rgba(245, 54, 54, 0.9)",
                      "rgba(237, 129, 40, 0.89)",
                      "rgba(50, 172, 45, 0.97)"
                    ],
                    "dateFormat": "YYYY-MM-DD HH:mm:ss",
                    "decimals": 2,
                    "pattern": "__name__",
                    "thresholds": [],
                    "type": "hidden",
                    "unit": "short"
                  }
                ],
                "targets": [
                  {
                    "expr": "kube_pod_container_status_ready{namespace=\"$namespace\"}",
                    "format": "table",
                    "hide": false,
                    "intervalFactor": 2,
                    "legendFormat": "{{pod}}",
                    "refId": "A",
                    "step": 2
                  }
                ],
                "timeFrom": "1s",
                "title": "$namespace kube_pod_container_status_ready",
                "transform": "table",
                "transparent": false,
                "type": "table"
              }
            ],
            "repeat": null,
            "repeatIteration": null,
            "repeatRowId": null,
            "showTitle": false,
            "title": "Kube Metrics Status Ready",
            "titleSize": "h6"
          }
        ],
        "schemaVersion": 14,
        "style": "dark",
        "tags": [],
        "templating": {
          "list": [
            {
              "auto": true,
              "auto_count": 50,
              "auto_min": "50s",
              "current": {
                "text": "auto",
                "value": "$__auto_interval"
              },
              "hide": 0,
              "label": "interval",
              "name": "interval",
              "options": [
                {
                  "selected": true,
                  "text": "auto",
                  "value": "$__auto_interval"
                },
                {
                  "selected": false,
                  "text": "30s",
                  "value": "30s"
                },
                {
                  "selected": false,
                  "text": "1m",
                  "value": "1m"
                },
                {
                  "selected": false,
                  "text": "2m",
                  "value": "2m"
                },
                {
                  "selected": false,
                  "text": "3m",
                  "value": "3m"
                },
                {
                  "selected": false,
                  "text": "5m",
                  "value": "5m"
                },
                {
                  "selected": false,
                  "text": "7m",
                  "value": "7m"
                },
                {
                  "selected": false,
                  "text": "10m",
                  "value": "10m"
                },
                {
                  "selected": false,
                  "text": "30m",
                  "value": "30m"
                },
                {
                  "selected": false,
                  "text": "1h",
                  "value": "1h"
                },
                {
                  "selected": false,
                  "text": "6h",
                  "value": "6h"
                },
                {
                  "selected": false,
                  "text": "12h",
                  "value": "12h"
                },
                {
                  "selected": false,
                  "text": "1d",
                  "value": "1d"
                },
                {
                  "selected": false,
                  "text": "7d",
                  "value": "7d"
                },
                {
                  "selected": false,
                  "text": "14d",
                  "value": "14d"
                },
                {
                  "selected": false,
                  "text": "30d",
                  "value": "30d"
                }
              ],
              "query": "30s,1m,2m,3m,5m,7m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
              "refresh": 2,
              "type": "interval"
            },
            {
              "allValue": null,
              "current": {
                "text": "default",
                "value": "default"
              },
              "datasource": "prometheus",
              "hide": 0,
              "includeAll": false,
              "label": "Namespace",
              "multi": false,
              "name": "namespace",
              "options": [],
              "query": "label_values(namespace)",
              "refresh": 1,
              "regex": "",
              "sort": 1,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            }
          ]
        },
        "time": {
          "from": "now-3h",
          "to": "now"
        },
        "timepicker": {
          "nowDelay": "",
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "timezone": "browser",
        "title": "ICP 2.1 Namespaces Performance IBM Provided 2.5",
        "version": 3
      }
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-entry-config.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring-1.1.0
    release: bluecompute
    heritage: Tiller
    component: grafana
  name: bluecompute-grafana-entry-config
data:
  entrypoint.sh: |
    #!/bin/sh
    mkdir /etc/dashboards
    cp -f /tmp/grafana/dashboards/*.json /etc/dashboards/
    cp -f /tmp/grafana/config/* /etc/grafana
    /run.sh
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-set-ds-config.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring-1.1.0
    release: bluecompute
    heritage: Tiller
    component: grafana
  name: bluecompute-grafana-ds-entry-config
data:
  entrypoint.sh: |
    #!/bin/sh
    SCHEME=http://${GF_SECURITY_ADMIN_USER}:${GF_SECURITY_ADMIN_PASSWORD}@
    curl -X DELETE ${OPTIONS} ${SCHEME}bluecompute-grafana:3000/api/datasources/name/prometheus
    rc=$?
    if [[ $rc != 0 ]]; then
      exit $rc
    fi
    request_body=$(cat <<EOF
    {
      "name": "prometheus",
      "type": "prometheus",
      "access": "proxy",
      "isDefault": true,
      "url": "http://bluecompute-prometheus:9090"
    }
    EOF
    )
    resp=$(curl --write-out "STATUS_CODE:%{http_code}" -X POST ${OPTIONS} -H"Content-Type:application/json" --data-binary "$request_body" ${SCHEME}bluecompute-grafana:3000/api/datasources)
    echo $resp
    if [[ ${resp##*:} != 200 ]]; then
      exit -1
    fi
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/prometheus-config.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute-prometheus
    chart: ibm-icpmonitoring-1.1.0
    component: prometheus
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus
data:  
  prometheus.yml: |-
    global:
      scrape_interval: 1m
      evaluation_interval: 1m
  
    alerting:
      alertmanagers:
      - static_configs:
        - targets:
          - 'bluecompute-prometheus-alertmanager:9093'
        scheme: http
  
    rule_files:
      - /etc/alert-rules/*.rules
      - /etc/alert-rules/*.yml
  
    scrape_configs:
      - job_name: prometheus
        static_configs:
          - targets:
            - localhost:9090
  
      # A scrape configuration for running Prometheus on a Kubernetes cluster.
      # This uses separate scrape configs for cluster components (i.e. API server, node)
      # and services to allow each to use different authentication configs.
      #
      # Kubernetes labels will be added as Prometheus labels on metrics via the
      # `labelmap` relabeling action.
  
      # Scrape config for API servers.
      #
      # Kubernetes exposes API servers as endpoints to the default/kubernetes
      # service so this uses `endpoints` role and uses relabelling to only keep
      # the endpoints associated with the default/kubernetes service using the
      # default named port `https`. This works for single API server deployments as
      # well as HA API server deployments.
      - job_name: 'kubernetes-apiservers'
  
        kubernetes_sd_configs:
          - role: endpoints
  
        # Default to scraping over https. If required, just disable this or change to
        # `http`.
        scheme: https
  
        # This TLS & bearer token file config is used to connect to the actual scrape
        # endpoints for cluster components. This is separate to discovery auth
        # configuration because discovery & scraping are two separate concerns in
        # Prometheus. The discovery auth config is automatic if Prometheus runs inside
        # the cluster. Otherwise, more config options have to be provided within the
        # <kubernetes_sd_config>.
        tls_config:
          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          # If your node certificates are self-signed or use a different CA to the
          # master CA, then disable certificate verification below. Note that
          # certificate verification is an integral part of a secure infrastructure
          # so this should only be disabled in a controlled environment. You can
          # disable certificate verification by uncommenting the line below.
          #
          insecure_skip_verify: true
        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
  
        # Keep only the default/kubernetes service endpoints for the https port. This
        # will add targets for each API server which Kubernetes adds an endpoint to
        # the default/kubernetes service.
        relabel_configs:
          - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]
            action: keep
            regex: default;kubernetes;https
  
      - job_name: 'kubernetes-nodes'
  
        # Default to scraping over https. If required, just disable this or change to
        # `http`.
        scheme: https
  
        # This TLS & bearer token file config is used to connect to the actual scrape
        # endpoints for cluster components. This is separate to discovery auth
        # configuration because discovery & scraping are two separate concerns in
        # Prometheus. The discovery auth config is automatic if Prometheus runs inside
        # the cluster. Otherwise, more config options have to be provided within the
        # <kubernetes_sd_config>.
        tls_config:
          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          # If your node certificates are self-signed or use a different CA to the
          # master CA, then disable certificate verification below. Note that
          # certificate verification is an integral part of a secure infrastructure
          # so this should only be disabled in a controlled environment. You can
          # disable certificate verification by uncommenting the line below.
          #
          insecure_skip_verify: true
        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
  
        kubernetes_sd_configs:
          - role: node
  
        relabel_configs:
          - action: labelmap
            regex: __meta_kubernetes_node_label_(.+)
          - target_label: __address__
            replacement: kubernetes.default.svc:443
          - source_labels: [__meta_kubernetes_node_name]
            regex: (.+)
            target_label: __metrics_path__
            replacement: /api/v1/nodes/${1}/proxy/metrics
  
      # Scrape config for Kubelet cAdvisor.
      #
      # This is required for Kubernetes 1.7.3 and later, where cAdvisor metrics
      # (those whose names begin with 'container_') have been removed from the
      # Kubelet metrics endpoint.  This job scrapes the cAdvisor endpoint to
      # retrieve those metrics.
      #
      # In Kubernetes 1.7.0-1.7.2, these metrics are only exposed on the cAdvisor
      # HTTP endpoint; use "replacement: /api/v1/nodes/${1}:4194/proxy/metrics"
      # in that case (and ensure cAdvisor's HTTP server hasn't been disabled with
      # the --cadvisor-port=0 Kubelet flag).
      #
      # This job is not necessary and should be removed in Kubernetes 1.6 and
      # earlier versions, or it will cause the metrics to be scraped twice.
      - job_name: 'kubernetes-cadvisor'
  
        # Default to scraping over https. If required, just disable this or change to
        # `http`.
        scheme: https
  
        # This TLS & bearer token file config is used to connect to the actual scrape
        # endpoints for cluster components. This is separate to discovery auth
        # configuration because discovery & scraping are two separate concerns in
        # Prometheus. The discovery auth config is automatic if Prometheus runs inside
        # the cluster. Otherwise, more config options have to be provided within the
        # <kubernetes_sd_config>.
        tls_config:
          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
  
        kubernetes_sd_configs:
        - role: node
  
        relabel_configs:
        - action: labelmap
          regex: __meta_kubernetes_node_label_(.+)
        - target_label: __address__
          replacement: kubernetes.default.svc:443
        - source_labels: [__meta_kubernetes_node_name]
          regex: (.+)
          target_label: __metrics_path__
          replacement: /api/v1/nodes/${1}/proxy/metrics/cadvisor
  
      # Scrape config for service endpoints.
      #
      # The relabeling allows the actual service scrape endpoint to be configured
      # via the following annotations:
      #
      # * `prometheus.io/scrape`: Only scrape services that have a value of `true`
      # * `prometheus.io/scheme`: If the metrics endpoint is secured then you will need
      # to set this to `https` & most likely set the `tls_config` of the scrape config.
      # * `prometheus.io/path`: If the metrics path is not `/metrics` override this.
      # * `prometheus.io/port`: If the metrics are exposed on a different port to the
      # service then set this appropriately.
      - job_name: 'kubernetes-service-endpoints'
  
        kubernetes_sd_configs:
          - role: endpoints
  
        relabel_configs:
          - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scrape]
            action: keep
            regex: true
          - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scheme]
            action: replace
            target_label: __scheme__
            regex: (https?)
          - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_path]
            action: replace
            target_label: __metrics_path__
            regex: (.+)
          - source_labels: [__address__, __meta_kubernetes_service_annotation_prometheus_io_port]
            action: replace
            target_label: __address__
            regex: (.+)(?::\d+);(\d+)
            replacement: $1:$2
          - action: labelmap
            regex: __meta_kubernetes_service_label_(.+)
          - source_labels: [__meta_kubernetes_namespace]
            action: replace
            target_label: kubernetes_namespace
          - source_labels: [__meta_kubernetes_service_name]
            action: replace
            target_label: kubernetes_name
  
      # Example scrape config for probing services via the Blackbox Exporter.
      #
      # The relabeling allows the actual service scrape endpoint to be configured
      # via the following annotations:
      #
      # * `prometheus.io/probe`: Only probe services that have a value of `true`
      - job_name: 'kubernetes-services'
  
        metrics_path: /probe
        params:
          module: [http_2xx]
  
        kubernetes_sd_configs:
          - role: service
  
        relabel_configs:
          - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_probe]
            action: keep
            regex: true
          - source_labels: [__address__]
            target_label: __param_target
          - target_label: __address__
            replacement: blackbox
          - source_labels: [__param_target]
            target_label: instance
          - action: labelmap
            regex: __meta_kubernetes_service_label_(.+)
          - source_labels: [__meta_kubernetes_namespace]
            target_label: kubernetes_namespace
          - source_labels: [__meta_kubernetes_service_name]
            target_label: kubernetes_name
  
      # Example scrape config for pods
      #
      # The relabeling allows the actual pod scrape endpoint to be configured via the
      # following annotations:
      #
      # * `prometheus.io/scrape`: Only scrape pods that have a value of `true`
      # * `prometheus.io/path`: If the metrics path is not `/metrics` override this.
      # * `prometheus.io/port`: Scrape the pod on the indicated port instead of the default of `9102`.
      - job_name: 'kubernetes-pods'
  
        kubernetes_sd_configs:
          - role: pod
  
        relabel_configs:
          - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
            action: keep
            regex: true
          - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]
            action: replace
            target_label: __metrics_path__
            regex: (.+)
          - source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port]
            action: replace
            regex: (.+):(?:\d+);(\d+)
            replacement: ${1}:${2}
            target_label: __address__
          - action: labelmap
            regex: __meta_kubernetes_pod_label_(.+)
          - source_labels: [__meta_kubernetes_namespace]
            action: replace
            target_label: kubernetes_namespace
          - source_labels: [__meta_kubernetes_pod_name]
            action: replace
            target_label: kubernetes_pod_name
  
      # config for Liberty monitoring
      #
  
      - job_name: 'blue-compute'
        scheme: 'https'
        basic_auth:
          username: 'admin'
          password: 'password'
        tls_config:
          insecure_skip_verify: true
        kubernetes_sd_configs:
          - role: endpoints
        relabel_configs:
          - source_labels: [__meta_kubernetes_service_annotation_bluecompute]
            action: keep
            regex: true
---
# Source: bluecompute/charts/inventory/templates/inventory_data.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bluecompute-inventory-data
  labels:
    chart: 'bluecompute-inventory-0.0.1'
    release: bluecompute
    implementation: microprofile
data:
  mysql_data.sql: |-
    create database if not exists inventorydb;
    use inventorydb;
    create table if not exists items (
      id int not null auto_increment primary key,
      stock int not null,
      name varchar(100) not null,
      description varchar(1000) not null,
      price decimal(8,2) not null,
      img_alt varchar(75),
      img varchar(50) not null
    );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13401, 1000, 4599.99, "Dayton Meat Chopper", "meat-chopper.jpg", "Dayton Meat Chopper", "Punched-card tabulating machines and time clocks were not the only products offered by the young IBM. Seen here in 1930, manufacturing employees of IBM's Dayton Scale Company are assembling Dayton Safety Electric Meat Choppers. These devices, which won the Gold Medal at the 1926 Sesquicentennial International Exposition in Philadelphia, were produced in both counter base and pedestal styles (5000 and 6000 series, respectively). They included one-quarter horsepower models, one-third horsepower machines (Styles 5113, 6113F and 6213F), one-half horsepower types (Styles 5117, 6117F and 6217F) and one horsepower choppers (Styles 5128, 6128F and 6228F). Prices in 1926 varied from admin80 to bluemix-sandbox-dal-9-portal.5.dblayer.com75. Three years after this photograph was taken, the Dayton Scale Company became an IBM division, and was sold to the Hobart Manufacturing Company in 1934." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13402, 1000, 10599.99, "Hollerith Tabulator", "hollerith-tabulator.jpg", "Hollerith Tabulator", "This equipment is representative of the tabulating system invented and built for the U.S. Census Bureau by Herman Hollerith (1860-1929). After observing a train conductor punching railroad tickets to identify passengers, Hollerith conceived and developed the idea of using punched holes to record facts about people. These machines were first used in compiling the 1890 Census. Hollerith's patents were later acquired by the Computing-Tabulating-Recording Co. (which was renamed IBM in 1924) and this work became the basis of the IBM Punched Card System. Hollerith's tabulator used simple clock-like counting devices. When an electrical circuit was closed (through a punched hole in a predetermined position on the card), each counter was actuated by an electromagnet. The unit's pointer (clock hand) moved one step each time the magnet was energized. The circuits to the electromagnets were closed by means of a hand-operated press type card reader. The operator placed each card in the reader, pulled down the lever and removed the card after each punched hole was counted." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13403, 1000, 699.99, "Computing Scale", "computing-scale.jpg",  "Computing Scale", "In 1885 Julius Pitrat of Gallipolis, Ohio, patented the first computing scale. Six years later, Edward Canby and Orange Ozias of Dayton, Ohio, purchased Pitrat's patents and incorporated The Computing Scale Company as the world's first computing scale vendor. And four years after that, The Computing Scale Company introduced the first automatic computing scale, shown here. In 1911, the Computing Scale Company merged with the International Time Recording Company and Tabulating Machine Company to form the Computing-Tabulating-Recording Company, a business that was renamed IBM in 1924." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13404, 1000, 1299.99, "Tape Controlled Card Punch", "tape-controlled-punch.jpg", "Tape Controlled Card Punch", "IBM hired engineer-inventor Charles Doty in 1925, and he first worked as a secretary at the company’s main office at 50 Broad Street in Manhattan before transferring to the engineering laboratory at 225 Varick Street. Doty went on to write the specifications for a tape-to-card converter for engineers in IBM’s development laboratory in Endicott, N.Y. The first such machine consisted of a keypunch to which relays had been added to convert the code of the paper tape to the code of the punched cards, along with an attached paper-tape reading device. The engineering model was delivered and placed into testing on May 12, 1941, just three months after getting the green light for development. During the summer of 1941, the United States Army Air Corps received the first 10 units of the machine seen here, which was then known as the IBM 40 Tape Controlled Card Punch. Following delivery to the Air Corps, the Army’s Quartermaster Department, Signal Corps and other military organizations used the IBM 40, and its counterpart IBM 57 card-to-tape punch, for defense work during World War II. Commercial installations of both machines were also made at the New York, New Haven & Hartford Railroad; RCA; Bethlehem Steel; Vanity Fair; Western Electric; Merrill Lynch; Harris Upsham and others." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13405, 1000, 3899.99, "IBM 77 Electric Punched Card Collator", "electric-card-punch.jpg", "Electric Card Collator", "The IBM 77 electric punched card collator performed many card filing and pulling operations. As a filing machine, the Type 77 fed and compared simultaneously two groups of punched cards: records already in file and records to be filed. These two groups were merged in correct numerical or alphabetical sequence. When operated for the purpose of pulling cards, the Type 77 made it possible for one group of cards to pull corresponding cards from another group. Introduced in 1937, the IBM 77 collator rented for 0 a month. It was capable of handling 240 cards a minute, and was 40.5 inches long and 51 inches high. IBM withdrew the Type 77 from marketing on November 27, 1957." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13406, 1000, 2799.99, "Collator", "collator.jpg", "Collator", "The 85 collator performed many card filing and selection operations. It simultaneously could feed two sets of cards, merging the matched cards and selecting unmatched cards. In addition, the machine could check the sequence of the primary file of cards. It fed up to 120 cards per minute in each feed. IBM withdrew the 85 collator from marketing on September 7, 1978." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13407, 1000, 1899.99, "Summary Punch", "summary-punch.jpg", "Gang Summary Punch", "The IBM 523 gang summary punch made its debut on February 17, 1949. When attached to an IBM 400-series accounting machine, the 523 punched summary cards for various totals at the rate of 100 cards a minute. Gang punching and summary punching operations could be performed simultaneously. The last model of the 523 was withdrawn from marketing on December 1, 1975." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13408, 1000, 5199.99, "608 Calculator", "608-calculator.jpg", "Calculator", "The IBM 608 calculator (shown at left) was the first completely transistorized computer available for commercial installation. Announced in April 1955, the 608 began the transition of IBM's line of small and intermediate electronic calculators from vacuum tube to transistor operation. It contained more than 3,000 transistors -- tiny germanium devices no bigger than a paper clip -- and magnetic cores -- doughnut-shaped objects slightly larger than a pinhead, in the first known use of transistors and cores together in a computer. The magnetic cores could remember information indefinitely and recall it in a few millionths of a second, and made up the machine's internal storage or memory.<br>The 608's transistors made possible a 50 percent reduction in physical size and a 90 percent reduction in power requirements over comparable vacuum tube models. The machine could perform 4,500 additions a second, a computing speed 2.5 times faster than IBM's Type 607 calculator introduced only two years before. It could multiply two 9-digit numbers and derive the 18-digit product in 11 one-thousandths of a second, and divide an 18-digit number by a nine-digit number to produce the nine-digit quotient in just 13 one-thousandths of a second. The associated IBM 535 card read punch (shown at right) was used for both input and output, and was designed to permit a card to be calculated and the results punched while passing through the machine at the rate of 155 cards per minute.<br>In 1957, customers could purchase the 608 for 3,210 (or rent it for admin,760 a month) and the 535 for 228044,838 (or rent it for 15 a month). The 608 was withdrawn from marketing in April 1959." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13409, 1000, 399.99, "803 Proof Machine", "803-proof.jpg", "Proof Machine", "Debuting in July 1949, the IBM 803 Proof Machine was used to sort, list, prove and endorse checks, sales tickets, vouchers and other business documents in a single operation. Containing 32 sorting receptacles, the 803 had a number of compartment adding tapes. A control tape recorded all transactions in the original sequence, with sub and final totals of distributions. The ten-key electrified adding machine keyboard simplified the 803's operation. The machine also had signal lights to indicate the near depletion of the tape supply and other operating conditions. The 803 Proof Machine was withdrawn in December 1981 after more 30 years in the product catalogue." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13410, 1000, 899.99, "Model 01 Electric Typewriter", "01-typewriter.jpg", "Model 01 Typewriter", "In 1933 IBM acquired the tools, patents and production facilities of Electromatic Typewriters, Inc., of Rochester, N.Y. In the year following the acquisition, IBM invested more than admin million to redesign the Electromatic Typewriter, improve the company's research facilities and establish service centers. In 1935, the Model 01 IBM Electric Typewriter, seen here, was introduced. Wide customer acceptance soon made it the first successful electric typewriter in the United States." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13411, 1000, 1199.99, "Model A Standard Electric Typewriter", "a-typewriter.jpg", "Model A Typewriter", "In 1948 IBM introduced the IBM Model A Standard Electric Typewriter. This machine gave typists a new feeling of comfort and control as the carriage return, back space, tabulator and shift were operated with a fingertip touch. The Model A's multiple-copy control ensured legible carbon copies and stencils." );
    insert ignore into items ( id, stock, price, img_alt, img, name, description ) values ( 13412, 1000, 2199.99, "Selectric Typewriter", "selectric.jpg", "Selectric Typewriter", "Unveiled in 1961, the revolutionary Selectric typewriter eliminated the need for conventional type bars and movable carriages by using an innovative typing element on a head-and-rocker assembly, which, in turn, was mounted on a small carrier to move from left to right while typing." );
---
# Source: bluecompute/charts/mariadb/templates/master-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bluecompute-mariadb
  labels:
    app: mariadb
    component: "master"
    chart: mariadb-5.2.2
    release: "bluecompute"
    heritage: "Tiller"
data:
  my.cnf: |-
    [mysqld]
    skip-name-resolve
    explicit_defaults_for_timestamp
    basedir=/opt/bitnami/mariadb
    port=3306
    socket=/opt/bitnami/mariadb/tmp/mysql.sock
    tmpdir=/opt/bitnami/mariadb/tmp
    max_allowed_packet=16M
    bind-address=0.0.0.0
    pid-file=/opt/bitnami/mariadb/tmp/mysqld.pid
    log-error=/opt/bitnami/mariadb/logs/mysqld.log
    character-set-server=UTF8
    collation-server=utf8_general_ci
    
    [client]
    port=3306
    socket=/opt/bitnami/mariadb/tmp/mysql.sock
    default-character-set=UTF8
    
    [manager]
    port=3306
    socket=/opt/bitnami/mariadb/tmp/mysql.sock
    pid-file=/opt/bitnami/mariadb/tmp/mysqld.pid
---
# Source: bluecompute/charts/mariadb/templates/tests.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bluecompute-mariadb-tests
data:
  run.sh: |-
    @test "Testing MariaDB is accessible" {
      mysql -h bluecompute-mariadb -uroot -p$MARIADB_ROOT_PASSWORD -e 'show databases;'
    }
---
# Source: bluecompute/charts/mysql/templates/tests/test-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bluecompute-mysql-test
  labels:
    app: bluecompute-mysql
    chart: "mysql-0.10.2"
    heritage: "Tiller"
    release: "bluecompute"
data:
  run.sh: |-
    @test "Testing MySQL Connection" {
      mysql --host=bluecompute-mysql --port=3306 -u root -ppassword
    }
---
# Source: bluecompute/charts/orders/templates/orders_table.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bluecompute-orders-data
  labels:
    chart: 'bluecompute-orders-0.0.1'
    release: bluecompute
    implementation: microprofile
data:
  mysql_data.sql: |-
    create database if not exists ordersdb;
    use ordersdb;
    create table if not exists orders (
       orderId varchar(64) not null primary key,
       itemId int not null,
       customerId varchar(64) not null,
       count int not null,
       date timestamp not null
    );
---
# Source: bluecompute/charts/web/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: bluecompute
    micro: web-bff
    tier: frontend
    implementation: microprofile
    release: bluecompute
    chart: web-0.0.1
  name: bluecompute-web-config
  namespace: bluecompute
data:
  checks: "# Check the main website, including text content\r\n/\tIBM Cloud Architecture\r\n\r\n#Check
    the Inventory page\r\n/catalog/ Dayton Meat Chopper\r\n\r\n# Check for stylesheets
    and for text content in stylesheets\r\n/stylesheets/font-awesome/font-awesome.css
    \   @font-face\r\n\r\n\r\n# Check a sub-domain\r\n#//some-subdomain.some-site.com/reviews
    Review Data\r\n\r\n# Check HTTP access, and for text content\r\n# http://localhost:8000\tBlueCompute
    Store!\r\n# http://localhost:8000/inventory/\tDayton Meat Chopper\r\n"
  default.json: |
    {
      "Application": {
        "cluster_name": "",
        "region": ""
      },
      "Auth-Server": {
        "client_id":"bluecomputeweb",
        "client_secret":"bluecomputewebs3cret"
      },
      "APIs": {
        "protocol": "http",
        "protocols": "https",
        "catalog": {
          "service_name": "bluecompute-catalog:9080/catalog",
          "base_path": "/rest",
          "require": [
          ]
        },
        "order": {
          "service_name": "bluecompute-orders:9443/orders",
          "base_path": "/rest",
          "require": [
            "oauth"
          ]
        },
        "review": {
          "base_path": "/api",
          "require": [
            "oauth"
          ]
        },
        "customerService": {
          "service_name": "bluecompute-customer:9443/customer",
          "base_path": "/rest",
          "paths": {
            "customer": "/customer"
          },
          "require": [
              "oauth"
          ],
          "redirect_url": "http://localhost"
        },
        "customer": {
            "service_name": "bluecompute-auth:9443/oidc/endpoint",
            "base_path": "/OP",
            "paths": {
              "userinfo": "/userinfo"
            },
            "require": [
              "oauth"
            ],
            "redirect_url": "http://localhost"
        },
        "oauth20": {
          "protocol": "https",
          "service_name": "bluecompute-auth:9443/oidc/endpoint",
          "base_path": "/OP",
          "paths": {
            "authz": "/authorize",
            "token": "/token"
          },
          "grant_types": [
            "password"
          ],
          "scopes": [
            "bluecompute"
          ],
          "redirect_url": "http://localhost"
        }
      }
    }
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/cluster-role.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  labels:
    app: bluecompute-prometheus
    chart: ibm-icpmonitoring-1.1.0
    component: prometheus
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus
  namespace: bluecompute
rules:
- apiGroups: [""]
  resources:
  - nodes
  - nodes/proxy
  - services
  - endpoints
  - pods
  verbs: ["get", "list", "watch"]
- nonResourceURLs: ["/metrics"]
  verbs: ["get"]
---
# Source: bluecompute/templates/cluster_role.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  name: bluecompute-cluster-role
  labels:
    chart: 'bluecompute-bluecompute-0.0.6'
    release: bluecompute
    implementation: microprofile
rules:
- apiGroups:
  - extensions
  resources:
  - podsecuritypolicies
  resourceNames:
  - bluecompute-pod-security-policy
  verbs:
  - use
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/cluster-role-binding.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  labels:
    app: bluecompute-prometheus
    chart: ibm-icpmonitoring-1.1.0
    component: prometheus
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: bluecompute-prometheus
subjects:
- kind: ServiceAccount
  name: default
  namespace: bluecompute
---
# Source: bluecompute/charts/keystore/templates/keystore.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: "bluecompute-fabric8-rbac"
subjects:
  - kind: ServiceAccount
    # Reference to upper's `metadata.name`
    name: default
    # Reference to upper's `metadata.namespace`
    namespace: "bluecompute"
roleRef:
  kind: ClusterRole
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io
---
# Source: bluecompute/templates/cluster_role_binding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: bluecompute-cluster-role-binding
  labels:
    chart: 'bluecompute-bluecompute-0.0.6'
    release: bluecompute
    implementation: microprofile
subjects:
- kind: ServiceAccount
  name: default
  namespace: bluecompute
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: bluecompute-cluster-role
---
# Source: bluecompute/charts/auth/templates/authentication-microprofile.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-auth
  labels:
    chart: "bluecompute-auth-0.0.1"
    release: bluecompute
    implementation: "microprofile"
spec:
  type: NodePort
  ports:
  - name: http
    port: 9080
  - name: https
    port: 9443
  selector:
    app: bluecompute
    micro: auth
    service: server
    release: bluecompute
    implementation: "microprofile"
---
# Source: bluecompute/charts/catalog/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    bluecompute: "true"
    #prometheus.io/scrape: "true"
  name: bluecompute-catalog
  labels:
    chart: "bluecompute-catalog-0.0.1"
    release: bluecompute
    implementation: microprofile
spec:
  type: NodePort
  ports:
  - name: http
    port: 9080
  - name: https
    port: 9443
  selector:
    app: "bluecompute-catalog-selector"
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/customer/templates/cloudant-db.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-cloudant-service
  labels:
    chart: "customer-0.0.1"
    release: bluecompute
    implementation: microprofile
spec:
  type: NodePort
  ports:
    - port: 80
      nodePort: 31222
  selector:
    micro: customer
    service: cloudant-db
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/customer/templates/server.yaml
apiVersion: v1
kind: Service
metadata:
  name: "bluecompute-customer"
  labels:
    chart: "bluecompute-customer-0.0.1"
    release: bluecompute
    implementation: microprofile
spec:
  type: NodePort
  ports:
  - name: http
    port: 9080
  - name: https
    port: 9443
  selector:
    app: bluecompute
    micro: customer
    service: server
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/alertmanager-service.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: Service
metadata:
  labels:
    app: bluecompute-prometheus-alertmanager
    chart: ibm-icpmonitoring-1.1.0
    component: alertmanager
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus-alertmanager
spec:
  ports:
    - name: web
      port: 9093
      protocol: TCP
      targetPort: 9093
  selector:
    app: bluecompute-prometheus-alertmanager
    component: alertmanager
    release: bluecompute
  type: NodePort
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-service.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: Service
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring-1.1.0
    component: grafana
    release: bluecompute
    heritage: Tiller
  name: bluecompute-grafana
spec:
  ports:
    - name: "web"
      port: 3000
      protocol: TCP
      targetPort: 3000
  selector:
    app: bluecompute-grafana
    component: grafana
    release: bluecompute
  type: "NodePort"
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/prometheus-service.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: v1
kind: Service
metadata:
  labels:
    app: bluecompute-prometheus
    chart: ibm-icpmonitoring-1.1.0
    component: prometheus
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus
spec:
  ports:
    - name: http
      port: 9090
      protocol: TCP
      targetPort: 9090
  selector:
    app: bluecompute-prometheus
    component: prometheus
    release: bluecompute
  type: "NodePort"
---
# Source: bluecompute/charts/ibmcase-elasticsearch/templates/d_service.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-catalog-elasticsearch
  labels:
    datastore: elasticsearch
    release: "bluecompute"
    chart: "ibmcase-elasticsearch-0.0.1"
spec:
  ports:
  - name: http
    port: 9200
    protocol: TCP
  - name: transport
    port: 9300
    protocol: TCP
  selector:
    datastore: elasticsearch
---
# Source: bluecompute/charts/inventory/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    bluecompute: "true"
    #prometheus.io/scrape: "true"
  name: bluecompute-inventory
  labels:
    chart: "bluecompute-inventory-0.0.1"
    release: bluecompute
    implementation: microprofile
spec:
  type: NodePort
  ports:
  - name: http
    port: 9080
  - name: https
    port: 9443
  selector:
    app: "bluecompute-inventory-selector"
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/inventorydb/templates/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-inventorydb
  labels:
    app: bluecompute-inventorydb
    chart: "inventorydb-0.0.1"
    release: "bluecompute"
    heritage: "Tiller"
    implementation: microprofile
spec:
  type: ClusterIP
  ports:
  - name: mysql
    port: 3306
    targetPort: mysql
  selector:
    app: bluecompute-inventorydb
    implementation: microprofile
---
# Source: bluecompute/charts/mariadb/templates/master-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-mariadb
  labels:
    app: "mariadb"
    component: "master"
    chart: mariadb-5.2.2
    release: "bluecompute"
    heritage: "Tiller"
spec:
  type: ClusterIP
  ports:
  - name: mysql
    port: 3307
    targetPort: mysql
  selector:
    app: "mariadb"
    component: "master"
    release: "bluecompute"
---
# Source: bluecompute/charts/mysql/templates/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-mysql
  labels:
    app: bluecompute-mysql
    chart: "mysql-0.10.2"
    release: "bluecompute"
    heritage: "Tiller"
spec:
  type: ClusterIP
  ports:
  - name: mysql
    port: 3306
    targetPort: mysql
  selector:
    app: bluecompute-mysql
---
# Source: bluecompute/charts/orders/templates/rabbitmq.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-rabbitmq
  labels:
    chart: 'bluecompute-orders-0.0.1'
    release: bluecompute
    implementation: microprofile
spec:
  type: NodePort
  ports:
  - name: main
    port: 5672
  - name: management
    port: 15672
  selector:
    micro: orders
    service: chat
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/orders/templates/server.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-orders
  labels:
    chart: 'bluecompute-orders-0.0.1'
    release: bluecompute
    implementation: microprofile
spec:
  type: NodePort
  ports:
  - name: http
    port: 9080
  - name: https
    port: 9443
  selector:
    app: bluecompute
    micro: orders
    service: server
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/ordersdb/templates/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-ordersdb
  labels:
    app: bluecompute-ordersdb
    chart: "bluecompute-ordersdb-0.0.1"
    release: "bluecompute"
    heritage: "Tiller"
    implementation: microprofile
spec:
  type: ClusterIP
  ports:
  - name: mysql
    port: 3306
    targetPort: mysql
  selector:
    app: bluecompute-ordersdb
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/web/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-web
  namespace: bluecompute
  labels:
    app: bluecompute
    micro: web-bff
    tier: frontend
    implementation: microprofile
    release: bluecompute
    chart: web-0.0.1
spec:
  type: NodePort
  ports:
  - name: http
    protocol: TCP
    port: 80
    targetPort: 8000



  selector:
    app: bluecompute
    micro: web-bff
    tier: frontend
    release: bluecompute
    implementation: microprofile
---
# Source: bluecompute/charts/zipkin/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: bluecompute-zipkin
  labels:
    release: bluecompute
    heritage: Tiller
    chart: "bluecompute-zipkin-0.0.1"
    implementation: "microprofile"
spec:
  type: NodePort
  selector:
    app: "bluecompute-zipkin-selector"
  ports:
  - name: zipkin
    port: 9411
    targetPort: 9411
---
# Source: bluecompute/charts/auth/templates/authentication-microprofile.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-auth
  labels:
    app: bluecompute
    micro: auth
    service: server
    tier: backend
    release: bluecompute
    implementation: "microprofile"
    chart: 'bluecompute-auth-0.0.1'
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute
        micro: auth
        service: server
        tier: backend
        release: bluecompute
        implementation: "microprofile"
    spec:
      containers:
      - name: "auth"
        image: "ibmcase/auth-mp:v3.0.0"
        imagePullPolicy: Always
        readinessProbe:
          httpGet:
            path: /
            port: 9443
            scheme: HTTPS
          initialDelaySeconds: 60
          timeoutSeconds: 60
        livenessProbe:
          httpGet:
            path: /health
            port: 9443
            scheme: HTTPS
          initialDelaySeconds: 60
          timeoutSeconds: 60
        resources:
          requests:
            cpu: "200m"
            memory: "300Mi"
        env:
          - name: PORT
            value: "9080"
          - name: APPLICATION_NAME
            value: "bluecompute"
        volumeMounts:
        - name: keystorevol
          mountPath: "/etc/keystorevol"
          readOnly: true
      volumes:
      - name: keystorevol
        secret:
          secretName: keystoresecret
---
# Source: bluecompute/charts/catalog/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-catalog
  labels:
    chart: 'bluecompute-catalog-0.0.1'
    release: bluecompute
    implementation: microprofile
spec:
  replicas: 1
  revisionHistoryLimit: 1
  template:
    metadata:
      labels:
        app: "bluecompute-catalog-selector"
        release: bluecompute
        version: "current"
        implementation: microprofile
    spec:
      containers:
      - name: "catalog"
        image: "ibmcase/catalog-mp:v3.0.0"
        imagePullPolicy: IfNotPresent

        readinessProbe:
          httpGet:
            path: /
            port: 9080
          initialDelaySeconds: 60
          timeoutSeconds: 60
        livenessProbe:
          httpGet:
            path: /health
            port: 9080
          initialDelaySeconds: 1500
          timeoutSeconds: 500

        resources:
          requests:
            cpu: "200m"
            memory: "300Mi"
        env:
          
          - name: inventory_health
            value: "http://bluecompute-inventory:9080/health"
          - name: elasticsearch_url
            value: "http://bluecompute-catalog-elasticsearch:9200"
          
          - name: zipkinHost
            value: "bluecompute-zipkin"
          - name: zipkinPort
            value: "9411"
          - name: PORT
            value: "9080"
          - name: APPLICATION_NAME
            value: "bluecompute"
          - name: IBM_APM_SERVER_URL
            valueFrom:
              secretKeyRef:
                name: apm-server-config
                key: ibm_apm_server_url
                optional: true
          - name: IBM_APM_KEYFILE
            valueFrom:
              secretKeyRef:
                name: apm-server-config
                key: ibm_apm_keyfile
                optional: true
          - name: IBM_APM_KEYFILE_PASSWORD
            valueFrom:
              secretKeyRef:
                name: apm-server-config
                key: ibm_apm_keyfile_password
                optional: true
          - name: IBM_APM_INGRESS_URL
            valueFrom:
              secretKeyRef:
                name: apm-server-config
                key: ibm_apm_ingress_url
                optional: true
          - name: IBM_APM_ACCESS_TOKEN
            valueFrom:
              secretKeyRef:
                name: apm-server-config
                key: ibm_apm_access_token
                optional: true
        volumeMounts:
        - name: config-volume
          mountPath: /opt/ibm/wlp/usr/shared
      volumes:
      - name: config-volume
        configMap:
          name: bluecompute-catalog-config
---
# Source: bluecompute/charts/customer/templates/cloudant-db.yaml
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: "bluecompute-cloudant"
  labels:
    app: bluecompute
    micro: customer
    service: cloudant-db
    tier: backend
    release: bluecompute
    implementation: microprofile
    chart: 'customer-0.0.1'
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute
        micro: customer
        service: cloudant-db
        tier: backend
        release: bluecompute
        implementation: microprofile

    spec:
      containers:

      # Container for Cloudant
      - name: cloudant
        image: ibmcom/cloudant-developer
        imagePullPolicy: Always
        ports:
            - containerPort: 80
        env:
          - name: CLOUDANT_ROOT_PASSWORD
            value: pass
        #volumeMounts:
        #- name: cloudant-pv
          #mountPath: /var/lib/cloudant
      #volumes:
      #- name: cloudant-pv
        #persistentVolumeClaim:
          #claimName: cloudant-pv-claim
---
# Source: bluecompute/charts/customer/templates/server.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: "bluecompute-customer"
  labels:
    app: bluecompute
    micro: customer
    service: server
    tier: backend
    release: bluecompute
    implementation: microprofile
    chart: 'customer-0.0.1'
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute
        micro: customer
        service: server
        tier: backend
        release: bluecompute
        implementation: microprofile

    spec:
      containers:
      # Liberty Server Container
      - name: "customer"
        image: "ibmcase/customer-mp:v4.0.0"
        imagePullPolicy: IfNotPresent
        readinessProbe:
          httpGet:
            path: /
            port: 9443
            scheme: HTTPS
          initialDelaySeconds: 60
          timeoutSeconds: 60
        livenessProbe:
          httpGet:
            path: /health
            port: 9443
            scheme: HTTPS
          initialDelaySeconds: 1500
          timeoutSeconds: 500
        env:
          
          - name: jwksUri
            value: "https://bluecompute-auth:9443/oidc/endpoint/OP/jwk"
          - name: jwksIssuer
            value: "https://bluecompute-auth:9443/oidc/endpoint/OP"
          - name: administratorRealm
            value: "user:https://bluecompute-auth:9443/oidc/endpoint/OP/user"
          - name: auth_health
            value: "https://bluecompute-auth:9443/health"
        
          - name: host
            value: "bluecompute-cloudant-service"
          - name: PORT
            value: "9080"
          - name: RELEASE_NAME
            value: "bluecompute"
          - name: jwtid
            value: "myMpJwt"
          - name: zipkinHost
            value: "bluecompute-zipkin"
          - name: zipkinPort
            value: "9411"
        resources:
          requests:
            cpu: "200m"
            memory: "300Mi"
        volumeMounts:
        - name: keystorevol
          mountPath: "/etc/keystorevol"
          readOnly: true
        - name: config-volume
          mountPath: /opt/ibm/wlp/usr/shared
      volumes:
      - name: keystorevol
        secret:
          secretName: keystoresecret
      - name: config-volume
        configMap:
          name: bluecompute-customer-config
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/alertmanager-deployment.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: bluecompute-prometheus-alertmanager
    chart: ibm-icpmonitoring
    component: alertmanager
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus-alertmanager
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute-prometheus-alertmanager
        chart: ibm-icpmonitoring
        component: alertmanager
        release: bluecompute
        heritage: Tiller
      annotations:
        productName: alertmanager
        productVersion: 0.13.0
        productID: none
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - ppc64le
      containers:
        - name: configmap-reload
          image: ibmcom/configmap-reload:v0.1
          imagePullPolicy: Always
          args:
            - --volume-dir=/etc/config
            - --webhook-url=http://localhost:9093/-/reload
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
              readOnly: true
        - name: alertmanager
          image: ibmcom/alertmanager:v0.13.0
          imagePullPolicy: Always
          args:
            - --config.file=/etc/config/alertmanager.yml
            - --storage.path=/var/lib/alertmanager/data
          ports:
            - containerPort: 9093
          resources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 10m
              memory: 64Mi
            
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
            - name: storage-volume
              mountPath: "/var/lib/alertmanager/data"
      volumes:
        - name: config-volume
          configMap:
            name: bluecompute-prometheus-alertmanager
        - name: storage-volume
          emptyDir: {}
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-deployment.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring
    component: grafana
    release: bluecompute
    heritage: Tiller
  name: bluecompute-grafana
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute-grafana
        chart: ibm-icpmonitoring
        component: grafana
        release: "bluecompute"
        heritage: Tiller
      annotations:
        productName: grafana
        productVersion: 4.6.3
        productID: none
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - ppc64le
      containers:
        - name: grafana
          image: ibmcom/grafana:4.6.3
          imagePullPolicy: Always
          command: ["/opt/entry/entrypoint.sh"]
          env:
            - name: GF_SECURITY_ADMIN_USER
              valueFrom:
                secretKeyRef:
                  name: bluecompute-grafana-secret
                  key: username
            - name: GF_SECURITY_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: bluecompute-grafana-secret
                  key: password
          ports:
          - name: web
            containerPort: 3000
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
            
          volumeMounts:
            - name: grafana-storage
              mountPath: "/var/lib/grafana"
            - name: config-volume
              mountPath: "/tmp/grafana/config"
            - name: dashboard-volume
              mountPath: "/tmp/grafana/dashboards"
            - mountPath: "/opt/entry"
              name: grafana-entry
      volumes:
        - name: grafana-storage
          emptyDir: {}
        - name: config-volume
          configMap:
            name: bluecompute-grafana
        - name: dashboard-volume
          configMap:
            name: bluecompute-grafana-dashboards
        - name: grafana-entry
          configMap:
            name: bluecompute-grafana-entry-config
            defaultMode: 0744
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/prometheus-deployment.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: bluecompute-prometheus
    chart: ibm-icpmonitoring
    component: prometheus
    release: bluecompute
    heritage: Tiller
  name: bluecompute-prometheus
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute-prometheus
        chart: ibm-icpmonitoring
        component: prometheus
        release: bluecompute
        heritage: Tiller
      annotations:
        productName: prometheus
        productVersion: 2.0.0
        productID: none
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - ppc64le
      containers:
        - name: configmap-reload
          image: ibmcom/configmap-reload:v0.1
          imagePullPolicy: Always
          args:
            - --volume-dir=/etc/config
            - --volume-dir=/etc/alert-rules
            - --webhook-url=http://localhost:9090/-/reload
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
              readOnly: true
            - name: rules-volume
              mountPath: /etc/alert-rules
              readOnly: true
        - name: prometheus
          image: ibmcom/prometheus:v2.0.0
          imagePullPolicy: Always
          securityContext:
            runAsUser: 0
          args:
            - --config.file=/etc/config/prometheus.yml
            - --web.enable-lifecycle
            - --web.enable-admin-api
            - --storage.tsdb.path=/var/lib/prometheus/data
            - --storage.tsdb.retention=24h
          ports:
            - containerPort: 9090
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
            
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
            - name: rules-volume
              mountPath: /etc/alert-rules
            - name: storage-volume
              mountPath: /var/lib/prometheus/data
      volumes:
        - name: config-volume
          configMap:
            name: bluecompute-prometheus
        - name: rules-volume
          configMap:
            name: bluecompute-prometheus-alertrules
        - name: storage-volume
          emptyDir: {}
---
# Source: bluecompute/charts/ibmcase-elasticsearch/templates/c_replication_controller.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-default-cluster-elasticsearch
  namespace: bluecompute
  labels:
    datastore: elasticsearch
    
    release: "bluecompute"
    chart: ibmcase-elasticsearch-0.0.1
spec:
  replicas: 1
  template:
    metadata:
      labels:
        datastore: elasticsearch
        
    spec:
      volumes:
        - name: storage
          hostPath:
            path: /var/lib/elasticsearch-default-cluster

      containers:
      - name: elasticsearch
        securityContext:
          capabilities:
            add:
              - IPC_LOCK
        image: "quay.io/pires/docker-elasticsearch-kubernetes:1.7.1-4"
        imagePullPolicy: Always
        env:
          - name: KUBERNETES_CA_CERTIFICATE_FILE
            value: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: "CLUSTER_NAME"
            value: "default-cluster"
          - name: "DISCOVERY_SERVICE"
            value: "bluecompute-catalog-elasticsearch"
          - name: NODE_MASTER
            value: "true"
          - name: NODE_DATA
            value: "true"
          - name: HTTP_ENABLE
            value: "true"
          - name: "ES_JAVA_OPTS"
            value: "-Xms256m -Xmx256m"
        volumeMounts:
          - mountPath: /data
            name: storage
        resources:
            limits:
              memory: 700Mi
            requests:
              memory: 350Mi
            
        ports:
          - containerPort: 9200
            name: http
            protocol: TCP
          - containerPort: 9300
            name: transport
            protocol: TCP
---
# Source: bluecompute/charts/inventory/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-inventory
  labels:
    chart: 'bluecompute-inventory-0.0.1'
    release: bluecompute
    implementation: microprofile
spec:
  replicas: 1
  revisionHistoryLimit: 1
  template:
    metadata:
      labels:
        app: "bluecompute-inventory-selector"
        version: "current"
        release: bluecompute
        implementation: microprofile
    spec:
      containers:
      - name: "inventory"
        image: "ibmcase/inventory-mp:v2.0.0"
        imagePullPolicy: "IfNotPresent"

        readinessProbe:
          httpGet:
            path: /
            port: 9080
          initialDelaySeconds: 60
          timeoutSeconds: 60
        livenessProbe:
          httpGet:
            path: /health
            port: 9080
          initialDelaySeconds: 1500
          timeoutSeconds: 500

        resources:
          requests:
            cpu: "200m"
            memory: "300Mi"
        env:
          - name: jdbcURL
            value: "jdbc:mysql://bluecompute-mysql:3306/inventorydb?useSSL=false"
          - name: rabbit
            value: "bluecompute-rabbitmq"
          - name: PORT
            value: "9080"
          - name: APPLICATION_NAME
            value: "bluecompute"
          - name: zipkinHost
            value: "bluecompute-zipkin"
          - name: zipkinPort
            value: "9411"
---
# Source: bluecompute/charts/inventorydb/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-inventorydb
  labels:
    app: bluecompute-inventorydb
    chart: "inventorydb-0.0.1"
    release: "bluecompute"
    heritage: "Tiller"
    implementation: microprofile
spec:
  template:
    metadata:
      labels:
        app: bluecompute-inventorydb
        release: bluecompute
        implementation: microprofile
    spec:
      initContainers:
      - name: "remove-lost-found"
        image: "busybox:1.25.0"
        imagePullPolicy: "Always"
        command:  ["rm", "-fr", "/var/lib/mysql/lost+found"]
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
      containers:
      - name: bluecompute-inventorydb
        image: "ibmcase/bc-inventorydb:v2.0.0"
        imagePullPolicy: "Always"
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-inventorydb
              key: mysql-root-password
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-inventorydb
              key: mysql-password
        - name: MYSQL_USER
          value: ""
        - name: MYSQL_DATABASE
          value: ""
        ports:
        - name: mysql
          containerPort: 3306
        livenessProbe:
          exec:
            command:
            - sh
            - -c
            - "mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}"
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          exec:
            command:
            - sh
            - -c
            - "mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}"
          initialDelaySeconds: 5
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
      volumes:
      - name: data
        emptyDir: {}
---
# Source: bluecompute/charts/mysql/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-mysql
  labels:
    app: bluecompute-mysql
    chart: "mysql-0.10.2"
    release: "bluecompute"
    heritage: "Tiller"
spec:
  template:
    metadata:
      labels:
        app: bluecompute-mysql
    spec:
      initContainers:
      - name: "remove-lost-found"
        image: "busybox:1.25.0"
        imagePullPolicy: "IfNotPresent"
        command:  ["rm", "-fr", "/var/lib/mysql/lost+found"]
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
      # - name: do-something
      #   image: busybox
      #   command: ['do', 'something']
      
      containers:
      - name: bluecompute-mysql
        image: "mysql:5.7.14"
        imagePullPolicy: "IfNotPresent"
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-mysql
              key: mysql-root-password
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-mysql
              key: mysql-password
        - name: MYSQL_USER
          value: "dbuser"
        - name: MYSQL_DATABASE
          value: "inventorydb"
        ports:
        - name: mysql
          containerPort: 3306
        livenessProbe:
          exec:
            command:
            - sh
            - -c
            - "mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}"
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          exec:
            command:
            - sh
            - -c
            - "mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}"
          initialDelaySeconds: 5
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
        # - name: extras
        #   mountPath: /usr/share/extras
        #   readOnly: true
        
      volumes:
      - name: data
        emptyDir: {}
      # - name: extras
      #   emptyDir: {}
---
# Source: bluecompute/charts/orders/templates/rabbitmq.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-rabbitmq
  labels:
    app: bluecompute
    micro: orders
    service: chat
    tier: backend
    chart: 'bluecompute-orders-0.0.1'
    release: bluecompute
    implementation: microprofile
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute
        micro: orders
        service: chat
        tier: backend
        release: bluecompute
        implementation: microprofile
    spec:
      containers:
      - name: "rabbitmq"
        image: rabbitmq
        imagePullPolicy: Always
---
# Source: bluecompute/charts/orders/templates/server.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-orders
  labels:
    app: bluecompute
    micro: orders
    service: server
    tier: backend
    implementation: microprofile
    release: bluecompute
    chart: 'bluecompute-orders-0.0.1'
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute
        micro: orders
        service: server
        tier: backend
        release: bluecompute
        implementation: microprofile
    spec:
      containers:
      # Liberty Server Container
      - name: "orders"
        image: "ibmcase/orders-mp:v4.0.0"
        imagePullPolicy: IfNotPresent
        readinessProbe:
          httpGet:
            path: /
            port: 9443
            scheme: HTTPS
          initialDelaySeconds: 30
        livenessProbe:
          httpGet:
            path: /health
            port: 9443
            scheme: HTTPS
          initialDelaySeconds: 1500
          timeoutSeconds: 500

        env:
          
          - name: auth_health
            value: "https://bluecompute-auth:9443/health"
          - name: inventory_url
            value: "http://bluecompute-inventory:9080/inventory/rest/inventory/stock"
          - name: inventory_health
            value: "http://bluecompute-inventory:9080/health"
          - name: jwksUri
            value: "https://bluecompute-auth:9443/oidc/endpoint/OP/jwk"
          - name: jwksIssuer
            value: "https://bluecompute-auth:9443/oidc/endpoint/OP"
          - name: jwksUser
            value: "user:https://bluecompute-auth:9443/oidc/endpoint/OP/user"
          - name: administratorRealm
            value: "user:https://bluecompute-auth:9443/oidc/endpoint/OP/user"
          - name: jdbcURL
            value: "jdbc:mysql://bluecompute-mariadb:3307/ordersdb?useSSL=false"
          
          - name: rabbit
            value: "bluecompute-rabbitmq"
          - name: PORT
            value: "9080"
          - name: RELEASE_NAME
            value: "bluecompute"
          - name: jwtid
            value: "myMpJwt"
          - name: zipkinHost
            value: "bluecompute-zipkin"
          - name: zipkinPort
            value: "9411"

        resources:
          requests:
            cpu: "200m"
            memory: "300Mi"
        volumeMounts:
        - name: keystorevol
          mountPath: "/etc/keystorevol"
          readOnly: true
      volumes:
      - name: keystorevol
        secret:
          secretName: keystoresecret
---
# Source: bluecompute/charts/ordersdb/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-ordersdb
  labels:
    app: bluecompute-ordersdb
    chart: "ordersdb-0.0.1"
    release: "bluecompute"
    heritage: "Tiller"
    implementation: microprofile
spec:
  template:
    metadata:
      labels:
        app: bluecompute-ordersdb
        release: bluecompute
        implementation: microprofile
    spec:
      initContainers:
      - name: "remove-lost-found"
        image: "busybox:1.25.0"
        imagePullPolicy: "Always"
        command:  ["rm", "-fr", "/var/lib/mysql/lost+found"]
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
      containers:
      - name: bluecompute-ordersdb
        image: "ibmcase/bc-ordersdb:v2.0.0"
        imagePullPolicy: "Always"
        resources:
          requests:
            cpu: 100m
            memory: 256Mi
          
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-ordersdb
              key: mysql-root-password
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-ordersdb
              key: mysql-password
        - name: MYSQL_USER
          value: ""
        - name: MYSQL_DATABASE
          value: ""
        ports:
        - name: mysql
          containerPort: 3306
        livenessProbe:
          exec:
            command:
            - sh
            - -c
            - "mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}"
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          exec:
            command:
            - sh
            - -c
            - "mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}"
          initialDelaySeconds: 5
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
      volumes:
      - name: data
        emptyDir: {}
---
# Source: bluecompute/charts/web/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-web
  labels:
    app: bluecompute
    micro: web-bff
    tier: frontend
    implementation: microprofile
    release: bluecompute
    chart: web-0.0.1
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: bluecompute
        micro: web-bff
        tier: frontend
        release: bluecompute
        implementation: microprofile
    spec:
      containers:
      - name: web
        image: ibmcase/bc-web-mp:v2.0.0
        imagePullPolicy: Always
        ports:
        - containerPort: 8000
          protocol: TCP
        volumeMounts:
        - name: config-volume
          mountPath: /StoreWebApp/config
      volumes:
      - name: config-volume
        configMap:
          name: bluecompute-web-config
          items:
          - key: checks
            path: checks
          - key: default.json
            path: default.json
---
# Source: bluecompute/charts/zipkin/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: bluecompute-zipkin
  labels:
    chart: 'bluecompute-zipkin-0.0.1'
    release: bluecompute
    heritage: Tiller
    implementation: "microprofile"
spec:
  replicas: 1
  template:
    metadata:
      labels:
        app: "bluecompute-zipkin-selector"
        release: bluecompute
        implementation: "microprofile"
    spec:
      containers:
      - name: zipkin
        image: openzipkin/zipkin
        ports:
        - containerPort: 9411
          name: zipkin-api
        readinessProbe:
          httpGet:
            path: /
            port: 9411
          initialDelaySeconds: 30
          timeoutSeconds: 60
---
# Source: bluecompute/charts/mariadb/templates/master-statefulset.yaml
apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  name: bluecompute-mariadb
  labels:
    app: "mariadb"
    chart: mariadb-5.2.2
    component: "master"
    release: "bluecompute"
    heritage: "Tiller"
spec:
  selector:
    matchLabels:
      release: "bluecompute"
      component: "master"
      app: mariadb
  serviceName: "bluecompute-mariadb"
  replicas: 1
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: "mariadb"
        component: "master"
        release: "bluecompute"
        chart: mariadb-5.2.2
    spec:
      securityContext:
        fsGroup: 1001
        runAsUser: 1001
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 1
            podAffinityTerm:
              topologyKey: kubernetes.io/hostname
              labelSelector:
                matchLabels:
                  app: "mariadb"
                  release: "bluecompute"
      containers:
      - name: "mariadb"
        image: docker.io/bitnami/mariadb:10.1.36-debian-9
        imagePullPolicy: "IfNotPresent"
        env:
        - name: MARIADB_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-mariadb
              key: mariadb-root-password
        - name: MARIADB_USER
          value: "dbuser"
        - name: MARIADB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-mariadb
              key: mariadb-password
        - name: MARIADB_DATABASE
          value: "ordersdb"
        ports:
        - name: mysql
          containerPort: 3306
        livenessProbe:
          exec:
            command: ["sh", "-c", "exec mysqladmin status -uroot -p$MARIADB_ROOT_PASSWORD"]
          initialDelaySeconds: 120
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          exec:
            command: ["sh", "-c", "exec mysqladmin status -uroot -p$MARIADB_ROOT_PASSWORD"]
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          {}
          
        volumeMounts:
        - name: data
          mountPath: /bitnami/mariadb
        - name: config
          mountPath: /opt/bitnami/mariadb/conf/my.cnf
          subPath: my.cnf
      volumes:
        - name: config
          configMap:
            name: bluecompute-mariadb
        - name: "data"
          emptyDir: {}
---
# Source: bluecompute/charts/customer/templates/cloudant-db.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "bluecompute-populate"
spec:
  template:
    spec:
      containers:
      - name: populate-db
        image: "ibmcase/populate"
        imagePullPolicy: IfNotPresent
        # command: Taken care of by Dockerfile entrypoint, python3 tmp/populate.py
        args: ["bluecompute-cloudant-service", "80"]
      restartPolicy: Never
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/grafana-set-ds.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

apiVersion: batch/v1
kind: Job
metadata:
  labels:
    app: bluecompute-grafana
    chart: ibm-icpmonitoring-1.1.0
    component: setds
    release: bluecompute
    heritage: Tiller
  name: bluecompute-grafana-ds
spec:
  activeDeadlineSeconds: 1800
  template:
    metadata:
      labels:
        app: bluecompute-grafana
        component: setds
        release: "bluecompute"
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - ppc64le
      containers:
      - name: grafana-ds
        image: ibmcom/curl:3.6
        imagePullPolicy: Always
        command: ["/opt/entry/entrypoint.sh"]
        env:
          - name: GF_SECURITY_ADMIN_USER
            valueFrom:
              secretKeyRef:
                name: bluecompute-grafana-secret
                key: username
          - name: GF_SECURITY_ADMIN_PASSWORD
            valueFrom:
              secretKeyRef:
                name: bluecompute-grafana-secret
                key: password
        volumeMounts:
          - mountPath: "/opt/entry"
            name: grafana-ds-entry
      volumes:
        - name: grafana-ds-entry
          configMap:
            name: bluecompute-grafana-ds-entry-config
            defaultMode: 0744
      restartPolicy: OnFailure
---
# Source: bluecompute/charts/inventory/templates/load_data.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: bluecompute-inventory-job
  labels:
    chart: 'bluecompute-inventory-0.0.1'
    release: bluecompute
    implementation: microprofile
spec:
  template:
    metadata:
      name: bluecompute-inventory-job
      labels:
        chart: 'bluecompute-inventory-0.0.1'
        release: bluecompute
        implementation: microprofile
    spec:
      restartPolicy: Never
      initContainers:      
      - name: test-mysql
        image: mysql:5.7.14
        imagePullPolicy: Always
        command:
        - "/bin/bash"
        - "-c"
        - "until mysql -h ${MYSQL_HOST} -P ${MYSQL_PORT} -u${MYSQL_USER} -p${MYSQL_PASSWORD} -e status; do echo waiting for mysql; sleep 1; done"
        env:  
        - name: MYSQL_HOST
          value: bluecompute-mysql
        - name: MYSQL_PORT
          value: "3306"
        - name: MYSQL_DATABASE
          value: "inventorydb"
        - name: MYSQL_USER
          value: "root"
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-inventory-mysql-secret
              key: mysql-password
      containers:
      - name: populate-mysql
        image: mysql:5.7.14
        imagePullPolicy: Always
        volumeMounts:
        - mountPath: /inventory-data
          name: inventory-data
          readOnly: false
        command: ["/bin/bash", "-c"]
        args: ["cp /inventory-data/mysql_data.sql .; sed -i \"s/inventorydb/${MYSQL_DATABASE}/g\" mysql_data.sql; until mysql -h ${MYSQL_HOST} -P ${MYSQL_PORT} -u${MYSQL_USER} -p${MYSQL_PASSWORD} <mysql_data.sql; do echo \"waiting for mysql\"; sleep 1; done; echo \"Loaded data into database\";"]
        env:        
        - name: MYSQL_HOST
          value: bluecompute-mysql
        - name: MYSQL_PORT
          value: "3306"
        - name: MYSQL_DATABASE
          value: "inventorydb"
        - name: MYSQL_USER
          value: "root"
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-inventory-mysql-secret
              key: mysql-password
      volumes:
      - name: inventory-data
        configMap:
          name: bluecompute-inventory-data
---
# Source: bluecompute/charts/keystore/templates/keystore.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: "bluecompute-keystore-job"
spec:
  template:
    metadata:
      name: "bluecompute-keystore-job"
    spec:
      containers:
      - name: "keystore"
        image: "ibmcase/keygen-mp:v3.0.0"
        imagePullPolicy: Always
        resources:
          requests:
            cpu: "200m"
            memory: "300Mi"
        command: ["sh", "./bc_certs/keygen.sh"]
        args: ["bluecompute"]
      restartPolicy: Never
---
# Source: bluecompute/charts/orders/templates/load_data.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: bluecompute-orders-job
  labels:
    chart: 'bluecompute-orders-0.0.1'
    release: bluecompute
    implementation: microprofile
spec:
  template:
    metadata:
      name: bluecompute-orders-job
      labels:
        chart: 'bluecompute-orders-0.0.1'
        release: bluecompute
        implementation: microprofile
    spec:
      restartPolicy: Never
      initContainers:      
      - name: test-mariadb
        image: mysql:5.7.14
        imagePullPolicy: IfNotPresent
        command:
        - "/bin/bash"
        - "-c"
        - "until mysql -h ${MYSQL_HOST} -P ${MYSQL_PORT} -u${MYSQL_USER} -p${MYSQL_PASSWORD} -e status; do echo waiting for mariadb; sleep 1; done"
        env:  
        - name: MYSQL_HOST
          value: bluecompute-mariadb
        - name: MYSQL_PORT
          value: "3307"
        - name: MYSQL_DATABASE
          value: "ordersdb"
        - name: MYSQL_USER
          value: "root"
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-orders-mariadb-secret
              key: mariadb-password
      containers:
      - name: populate-mysql
        image: mysql:5.7.14
        imagePullPolicy: IfNotPresent
        volumeMounts:
        - mountPath: /orders-data
          name: orders-data
          readOnly: false
        command: ["/bin/bash", "-c"]
        args: ["cp /orders-data/mysql_data.sql .; sed -i \"s/ordersdb/${MYSQL_DATABASE}/g\" mysql_data.sql; until mysql -h ${MYSQL_HOST} -P ${MYSQL_PORT} -u${MYSQL_USER} -p${MYSQL_PASSWORD} <mysql_data.sql; do echo \"waiting for mysql\"; sleep 1; done; echo \"Loaded data into database\";"]
        env:        
        - name: MYSQL_HOST
          value: bluecompute-mariadb
        - name: MYSQL_PORT
          value: "3307"
        - name: MYSQL_DATABASE
          value: "ordersdb"
        - name: MYSQL_USER
          value: "root"
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: bluecompute-orders-mariadb-secret
              key: mariadb-password
      volumes:
      - name: orders-data
        configMap:
          name: bluecompute-orders-data
---
# Source: bluecompute/charts/web/templates/ingress.yaml
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
  name: bluecompute-web
  labels:
    app: bluecompute
    micro: web-bff
    tier: frontend
    implementation: microprofile
    heritage: "Tiller"
    release: bluecompute
    chart: "web-0.0.1"
spec:
  rules:
  - host: bluecompute.mycluster12345.us-south.containers.appdomain.cloud
    http:
      paths:
      - path: /
        backend:
          serviceName: bluecompute-web
          servicePort: 80
---
# Source: bluecompute/charts/ibm-icpmonitoring/templates/tests/test.yaml
# Licensed Materials - Property of IBM
# 5737-E67
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

#placeholder for test
